"use strict";(self.webpackChunksea_orm_x=self.webpackChunksea_orm_x||[]).push([[738],{2204:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>o});var a=n(2374);const i={},r=a.createContext(i);function s(e){const t=a.useContext(r);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:t},e.children)}},8479:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"migration/setting-up-migration","title":"Setting Up Migration","description":"Installing SeaORM X CLI","source":"@site/docs/03-migration/01-setting-up-migration.md","sourceDirName":"03-migration","slug":"/migration/setting-up-migration","permalink":"/preview/pr-147/SeaORM-X/docs/migration/setting-up-migration","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM-X/docs/03-migration/01-setting-up-migration.md","tags":[],"version":"current","lastUpdatedBy":"Billy Chan","lastUpdatedAt":1749650794000,"sidebarPosition":1,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Database Connection","permalink":"/preview/pr-147/SeaORM-X/docs/install-and-config/connection"},"next":{"title":"Running Migration","permalink":"/preview/pr-147/SeaORM-X/docs/migration/running-migration"}}');var i=n(8790),r=n(2204);const s={},o="Setting Up Migration",c={},l=[{value:"Installing SeaORM X CLI",id:"installing-seaorm-x-cli",level:2},{value:"Workspace Structure",id:"workspace-structure",level:2},{value:"Migration Crate",id:"migration-crate",level:3},{value:"Entity Crate",id:"entity-crate",level:3},{value:"App Crate",id:"app-crate",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"setting-up-migration",children:"Setting Up Migration"})}),"\n",(0,i.jsx)(t.h2,{id:"installing-seaorm-x-cli",children:"Installing SeaORM X CLI"}),"\n",(0,i.jsxs)(t.p,{children:["Install ",(0,i.jsx)(t.code,{children:"sea-orm-cli"})," with ",(0,i.jsx)(t.code,{children:"cargo"})," locally."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-shell",children:'cargo install --path "<SEA_ORM_X_ROOT>/sea-orm-x/sea-orm-cli"\n'})}),"\n",(0,i.jsx)(t.h2,{id:"workspace-structure",children:"Workspace Structure"}),"\n",(0,i.jsxs)(t.p,{children:["It is recommended to structure your cargo workspace as follows to share SeaORM entities between the app crate and the migration crate. Checkout the ",(0,i.jsx)(t.a,{href:"https://github.com/SeaQL/sea-orm-x/tree/main/sea-orm-x/examples",children:"integration examples"})," for demonstration."]}),"\n",(0,i.jsx)(t.h3,{id:"migration-crate",children:"Migration Crate"}),"\n",(0,i.jsxs)(t.p,{children:["Import the ",(0,i.jsx)(t.code,{children:"sea-orm-migration"})," and ",(0,i.jsx)(t.a,{href:"https://crates.io/crates/async-std",children:(0,i.jsx)(t.code,{children:"async-std"})})," crate."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-toml",metastring:'title="migration/Cargo.toml"',children:'[dependencies]\nasync-std = { version = "1", features = ["attributes", "tokio1"] }\n\n[dependencies.sea-orm-migration]\nversion = "0.12"\npath = "<SEA_ORM_X_ROOT>/sea-orm-x/sea-orm-migration"\nfeatures = [\n  # Enable at least one `ASYNC_RUNTIME` and `DATABASE_DRIVER` feature if you want to run migration via CLI.\n  # View the list of supported features at https://www.sea-ql.org/SeaORM/docs/install-and-config/database-and-async-runtime.\n  # e.g.\n  # "runtime-tokio-rustls",  # `ASYNC_RUNTIME` feature\n  # "sqlz-mssql",            # `DATABASE_DRIVER` feature\n]\n'})}),"\n",(0,i.jsx)(t.h3,{id:"entity-crate",children:"Entity Crate"}),"\n",(0,i.jsx)(t.p,{children:"Specify SeaORM X dependency."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-toml",metastring:'title="entity/Cargo.toml"',children:'[dependencies]\nsea-orm = { version = "0.12", path = "<SEA_ORM_X_ROOT>/sea-orm-x" }\n'})}),"\n",(0,i.jsx)(t.h3,{id:"app-crate",children:"App Crate"}),"\n",(0,i.jsx)(t.p,{children:"This is where the application logic goes."}),"\n",(0,i.jsx)(t.p,{children:"Create a workspace that contains app, entity and migration crates and import the entity crate into the app crate."}),"\n",(0,i.jsx)(t.p,{children:"If we want to bundle the migration utility as part of your app, you'd also want to import the migration crate."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-toml",metastring:'title="./Cargo.toml"',children:'[workspace]\nmembers = [".", "entity", "migration"]\n\n[dependencies]\nentity = { path = "entity" }\nmigration = { path = "migration" } # depends on your needs\n\n[dependencies]\nsea-orm = { version = "0.12", path = "<SEA_ORM_X_ROOT>/sea-orm-x", features = [..] }\n'})})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);