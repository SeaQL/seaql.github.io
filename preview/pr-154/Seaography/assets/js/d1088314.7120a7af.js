"use strict";(self.webpackChunkseaography=self.webpackChunkseaography||[]).push([[5970],{3987:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"access-control/schema-restrictions","title":"Schema Restrictions","description":"By default, the schema builder register full CRUD for all entities:","source":"@site/docs/06-access-control/02-schema-restrictions.md","sourceDirName":"06-access-control","slug":"/access-control/schema-restrictions","permalink":"/preview/pr-154/Seaography/docs/access-control/schema-restrictions","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/Seaography/docs/06-access-control/02-schema-restrictions.md","tags":[],"version":"current","lastUpdatedBy":"Billy Chan","lastUpdatedAt":1761297220000,"sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Authentication","permalink":"/preview/pr-154/Seaography/docs/access-control/authentication"},"next":{"title":"Entity / Field Guards","permalink":"/preview/pr-154/Seaography/docs/access-control/guards"}}');var r=n(8790),s=n(8032);const o={},a="Schema Restrictions",l={},c=[{value:"Hide Entity",id:"hide-entity",level:2},{value:"No mutation",id:"no-mutation",level:2},{value:"Hide Column",id:"hide-column",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"schema-restrictions",children:"Schema Restrictions"})}),"\n",(0,r.jsx)(t.p,{children:"By default, the schema builder register full CRUD for all entities:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:"pub fn schema_builder(..) -> SchemaBuilder {\n    let mut builder = Builder::new(context, database.clone());\n\n    builder = register_entity_modules(builder);\n\n    ..\n}\n"})}),"\n",(0,r.jsx)(t.p,{children:"You can register entities individually:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:"seaography::register_entity!(builder, actor);\nseaography::register_entity!(builder, address);\n..\n"})}),"\n",(0,r.jsx)(t.h2,{id:"hide-entity",children:"Hide Entity"}),"\n",(0,r.jsx)(t.p,{children:"You can omit certain entities from the schema."}),"\n",(0,r.jsxs)(t.p,{children:["However, if the Entity is related to other Entities, you need to remove it from all relations as well.\nFor example, to remove ",(0,r.jsx)(t.code,{children:"Customer"}),":"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:'#[derive(Copy, Clone, Debug, EnumIter, DeriveRelatedEntity)]\npub enum RelatedEntity {\n    #[sea_orm(entity = "super::customer::Entity")] // remove this\n    Customer,                                      // remove this\n}\n'})}),"\n",(0,r.jsx)(t.h2,{id:"no-mutation",children:"No mutation"}),"\n",(0,r.jsx)(t.p,{children:"You can also register entities without mutation if you intend to implement all mutations with custom endpoints:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:"seaography::register_entity!(builder, actor, mutation: false);\n"})}),"\n",(0,r.jsx)(t.h2,{id:"hide-column",children:"Hide Column"}),"\n",(0,r.jsx)(t.p,{children:"You can remove a column from the GraphQL schema by annotating the SeaORM Model:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-rust",children:'#[derive(Clone, Debug, PartialEq, DeriveEntityModel, Deserialize)]\n#[sea_orm(table_name = "user")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i64,\n    #[seaography(ignore)] // \u2b05 remove from GraphQL schema\n    pub password: String,\n}\n'})}),"\n",(0,r.jsx)(t.p,{children:"This column will still be usable in other parts of the application, for example in custom endpoints. But it will not be visible to clients."}),"\n",(0,r.jsx)(t.p,{children:"If you remove this field from the struct, then this column will not be visible to the entire application."})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8032:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>a});var i=n(2374);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);