"use strict";(self.webpackChunkseaography=self.webpackChunkseaography||[]).push([[1288],{4117:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>u,default:()=>l,frontMatter:()=>p,metadata:()=>o,toc:()=>r});const o=JSON.parse('{"id":"custom-endpoints/custom-union","title":"Custom Union","description":"You can create complex enums in Rust and they will be mapped to unions in GraphQL.","source":"@site/docs/04-custom-endpoints/04-custom-union.md","sourceDirName":"04-custom-endpoints","slug":"/custom-endpoints/custom-union","permalink":"/preview/pr-169/Seaography/docs/custom-endpoints/custom-union","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/Seaography/docs/04-custom-endpoints/04-custom-union.md","tags":[],"version":"current","lastUpdatedBy":"Billy Chan","lastUpdatedAt":1770970604000,"sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Custom Mutation","permalink":"/preview/pr-169/Seaography/docs/custom-endpoints/custom-mutation"},"next":{"title":"Custom Method","permalink":"/preview/pr-169/Seaography/docs/custom-endpoints/custom-method"}}');var i=t(8790),s=t(8032);const p={},u="Custom Union",a={},r=[];function c(n){const e={code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"custom-union",children:"Custom Union"})}),"\n",(0,i.jsx)(e.p,{children:"You can create complex enums in Rust and they will be mapped to unions in GraphQL."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"#[derive(Clone, CustomInputType, CustomOutputType)]\npub enum Shape {\n    Rectangle(Rectangle),\n    Circle(Circle),\n    Triangle(Triangle),\n}\n\n#[derive(Clone, CustomInputType, CustomOutputType)]\npub struct Rectangle {\n    pub origin: Point,\n    pub size: Size,\n}\n\n#[derive(Clone, CustomInputType, CustomOutputType)]\npub struct Circle {\n    pub center: Point,\n    pub radius: f64,\n}\n\n#[derive(Clone, CustomInputType, CustomOutputType)]\npub struct Triangle {\n    pub p1: Point,\n    pub p2: Point,\n    pub p3: Point,\n}\n\n#[derive(Clone, Copy, CustomInputType, CustomOutputType)]\npub struct Point {\n    pub x: f64,\n    pub y: f64,\n}\n\n#[derive(Clone, Copy, CustomInputType, CustomOutputType)]\npub struct Size {\n    pub width: f64,\n    pub height: f64,\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"The GraphQL schema will look like the following:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"union Shape = Rectangle | Circle | Triangle\n\ntype Rectangle {\n  origin: Point!\n  size: Size!\n}\n\ninput RectangleInput {\n  origin: PointInput!\n  size: SizeInput!\n}\n\ntype Circle {\n  center: Point!\n  radius: Float!\n}\n\ninput CircleInput {\n  center: PointInput!\n  radius: Float!\n}\n\ntype Triangle {\n  p1: Point!\n  p2: Point!\n  p3: Point!\n}\n\ninput TriangleInput {\n  p1: PointInput!\n  p2: PointInput!\n  p3: PointInput!\n}\n\ntype Point {\n  x: Float!\n  y: Float!\n}\n\ninput PointInput {\n  x: Float!\n  y: Float!\n}\n\ntype Size {\n  width: Float!\n  height: Float!\n}\n\ninput SizeInput {\n  width: Float!\n  height: Float!\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"We can add a simple endpoint:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"#[CustomFields]\nimpl Operations {\n    async fn echo_shape(shape: Shape) -> async_graphql::Result<Shape> {\n        Ok(shape)\n    }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"Try a query:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-graphql",children:"{\n  echo_shape(\n    shape: {\n      Rectangle: {\n        origin: { x: 3, y: 12 },\n        size: { width: 20, height: 10 },\n      }\n    }\n  ) {\n    __typename\n    ... on Rectangle {\n      origin { x y }\n      size { width height }\n    }\n  }\n}\n"})}),"\n",(0,i.jsx)(e.p,{children:"Returns:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "echo_shape": {\n    "__typename": "Rectangle",\n    "origin": {\n      "x": 3.0,\n      "y": 12.0\n    },\n    "size": {\n      "height": 10.0,\n      "width": 20.0\n    }\n  }\n}\n'})})]})}function l(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},8032:(n,e,t)=>{t.d(e,{R:()=>p,x:()=>u});var o=t(2374);const i={},s=o.createContext(i);function p(n){const e=o.useContext(s);return o.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function u(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:p(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);