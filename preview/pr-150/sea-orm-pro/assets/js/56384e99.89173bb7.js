"use strict";(self.webpackChunksea_orm_pro=self.webpackChunksea_orm_pro||[]).push([[588],{4251:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/composite-table-config-child-table-75321d6b7e5f8178fee27edaa3d7a921.png"},6059:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(2374);const l={},d=i.createContext(l);function o(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(d.Provider,{value:n},e.children)}},6883:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>s});const i=JSON.parse('{"id":"composite-table-config/child-table","title":"Child Table","description":"Name of Child Relation","source":"@site/docs/05-composite-table-config/03-child-table.md","sourceDirName":"05-composite-table-config","slug":"/composite-table-config/child-table","permalink":"/preview/pr-150/sea-orm-pro/docs/composite-table-config/child-table","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/sea-orm-pro/docs/05-composite-table-config/03-child-table.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1755507057000,"sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Parent Table","permalink":"/preview/pr-150/sea-orm-pro/docs/composite-table-config/parent-table"},"next":{"title":"Virtual Machine","permalink":"/preview/pr-150/sea-orm-pro/docs/deployment/vm"}}');var l=t(8790),d=t(6059);const o={},a="Child Table",r={},s=[{value:"Name of Child Relation",id:"name-of-child-relation",level:2},{value:"Child Table is-a Raw Table",id:"child-table-is-a-raw-table",level:2},{value:"Full Spec",id:"full-spec",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,d.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"child-table",children:"Child Table"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.img,{src:t(4251).A+"#light"}),"\n",(0,l.jsx)(n.img,{src:t(7574).A+"#dark"})]}),"\n",(0,l.jsx)(n.h2,{id:"name-of-child-relation",children:"Name of Child Relation"}),"\n",(0,l.jsxs)(n.p,{children:["All child tables have to be linked via parent's relation.\nFor example, the ",(0,l.jsx)(n.code,{children:"sales_order_header"})," entity have relation to ",(0,l.jsx)(n.code,{children:"address"}),", ",(0,l.jsx)(n.code,{children:"customer"})," and ",(0,l.jsx)(n.code,{children:"sales_order_detail"}),"."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-rust",metastring:"title=src/models/sales_order_header.rs",children:'#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]\npub enum Relation {\n    #[sea_orm(\n        belongs_to = "super::address::Entity",\n        from = "Column::BillToAddressId",\n        to = "super::address::Column::AddressId",\n        on_update = "NoAction",\n        on_delete = "NoAction"\n    )]\n    Address2,\n    #[sea_orm(\n        belongs_to = "super::address::Entity",\n        from = "Column::ShipToAddressId",\n        to = "super::address::Column::AddressId",\n        on_update = "NoAction",\n        on_delete = "NoAction"\n    )]\n    Address1,\n    #[sea_orm(\n        belongs_to = "super::customer::Entity",\n        from = "Column::CustomerId",\n        to = "super::customer::Column::CustomerId",\n        on_update = "NoAction",\n        on_delete = "NoAction"\n    )]\n    Customer,\n    #[sea_orm(has_many = "super::sales_order_detail::Entity")]\n    SalesOrderDetail,\n}\n'})}),"\n",(0,l.jsx)(n.p,{children:"In the TOML config, we link the parent-child relations using the name of relation in snake-case:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:"title=pro_admin/composite_tables/sales_order.toml",children:'[[children]]\nrelation = "customer"\n# ...\n\n[[children]]\nrelation = "address1"\n# ...\n\n[[children]]\nrelation = "address2"\n# ...\n\n[[children]]\nrelation = "sales_order_detail"\n# ...\n'})}),"\n",(0,l.jsx)(n.h2,{id:"child-table-is-a-raw-table",children:"Child Table is-a Raw Table"}),"\n",(0,l.jsx)(n.p,{children:"All raw table config can be applied to child table."}),"\n",(0,l.jsx)(n.h2,{id:"full-spec",children:"Full Spec"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",metastring:"title=pro_admin/composite_tables/sales_order.toml",children:'[[children]]\n# Name of SeaORM relation\nrelation = "customer"\n\n[children.table]\ncolumns = [\n    { title = "ID", field = "customer_id", width = 80 },\n    { field = "title", width = 100 },\n    { field = "first_name", width = 120 },\n    { field = "middle_name", width = 120 },\n    { field = "last_name", width = 120 },\n]\nhidden_columns = [\n    "name_style",\n    "suffix",\n    "email_address",\n    "phone",\n    "rowguid",\n    "created_date",\n]\n\n\n[[children]]\n# Name of SeaORM relation\nrelation = "address1"\n\n[children.table]\ntitle = "Shipping Address"\ncolumns = [\n    { title = "ID", field = "address_id", width = 80 },\n]\nhidden_columns = [\n    "rowguid",\n    "created_date",\n]\n\n\n[[children]]\n# Name of SeaORM relation\nrelation = "address2"\n\n[children.table]\ntitle = "Billing Address"\ncolumns = [\n    { title = "ID", field = "address_id", width = 80 },\n]\nhidden_columns = [\n    "rowguid",\n    "created_date",\n]\n\n\n[[children]]\n# Name of SeaORM relation\nrelation = "sales_order_detail"\n\n[children.table]\ncolumns = [\n    { title = "Thumbnail", field = "thumb_nail_photo", relation = "product", input_type = "image", width = 120 },\n    { field = "name", relation = "product", width = 300 },\n    { field = "product_number", relation = "product" },\n    { field = "color", relation = "product" },\n    { field = "size", relation = "product" },\n    { field = "weight", relation = "product" },\n    { field = "order_qty" },\n    { field = "unit_price" },\n    { field = "unit_price_discount" },\n]\nhidden_columns = [\n    "sales_order_id",\n    "sales_order_detail_id",\n    "product_id",\n    "rowguid",\n    "created_date",\n]\n'})})]})}function m(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},7574:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/composite-table-config-child-table-dark-b9e6e2cb48385aa4e693dd1a2e4ce420.png"}}]);