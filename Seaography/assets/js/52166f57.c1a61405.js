"use strict";(self.webpackChunkseaography=self.webpackChunkseaography||[]).push([[5555],{6864:(e,r,s)=>{s.r(r),s.d(r,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"getting-started/project-structure","title":"Project Structure","description":"The generated project looks like:","source":"@site/docs/02-getting-started/02-project-structure.md","sourceDirName":"02-getting-started","slug":"/getting-started/project-structure","permalink":"/Seaography/docs/getting-started/project-structure","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/Seaography/docs/02-getting-started/02-project-structure.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1761305479000,"sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Bootstrap Project","permalink":"/Seaography/docs/getting-started/bootstrap"},"next":{"title":"Data Types","permalink":"/Seaography/docs/graphql-schema/data-types"}}');var n=s(8790),i=s(8032);const o={},c="Project Structure",a={},d=[{value:"Entities",id:"entities",level:2},{value:"<code>mod.rs</code>",id:"modrs",level:3},{value:"GraphQL schema",id:"graphql-schema",level:2},{value:"<code>query_root.rs</code>",id:"query_rootrs",level:3},{value:"App",id:"app",level:2},{value:"<code>Cargo.toml</code>",id:"cargotoml",level:3},{value:"<code>main.rs</code>",id:"mainrs",level:3}];function l(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"project-structure",children:"Project Structure"})}),"\n",(0,n.jsx)(r.p,{children:"The generated project looks like:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-sh",children:"Cargo.toml\nsrc\n\u251c\u2500\u2500 entities\n\u2502   \u251c\u2500\u2500 actor.rs\n\u2502   \u251c\u2500\u2500 address.rs\n\u2502   \u251c\u2500\u2500 category.rs\n\u2502   \u251c\u2500\u2500 city.rs\n\u2502   \u251c\u2500\u2500 country.rs\n\u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u251c\u2500\u2500 prelude.rs\n\u2502   \u251c\u2500\u2500 sea_orm_active_enums.rs\n\u2502   \u2514\u2500\u2500 ..\n\u251c\u2500\u2500 lib.rs\n\u251c\u2500\u2500 main.rs\n\u2514\u2500\u2500 query_root.rs\n"})}),"\n",(0,n.jsx)(r.h2,{id:"entities",children:"Entities"}),"\n",(0,n.jsx)(r.p,{children:"This is the folder containing all SeaORM entities. Each file corresponds to a database table."}),"\n",(0,n.jsx)(r.h3,{id:"modrs",children:(0,n.jsx)(r.code,{children:"mod.rs"})}),"\n",(0,n.jsxs)(r.p,{children:["This is the module file listing all entities. These two macros ",(0,n.jsx)(r.code,{children:"register_entity_modules!"})," and ",(0,n.jsx)(r.code,{children:"register_active_enums!"})," register these entities to Seaography. If you want to ignore certain tables, you can remove them from this list."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-rust",children:"pub mod prelude;\n\npub mod actor;\npub mod address;\npub mod category;\npub mod city;\npub mod country;\n\nseaography::register_entity_modules!([\n    actor,\n    address,\n    category,\n    city,\n    country,\n    ..\n]);\nseaography::register_active_enums!([ .. ]);\n"})}),"\n",(0,n.jsx)(r.h2,{id:"graphql-schema",children:"GraphQL schema"}),"\n",(0,n.jsx)(r.h3,{id:"query_rootrs",children:(0,n.jsx)(r.code,{children:"query_root.rs"})}),"\n",(0,n.jsx)(r.p,{children:"This is the root of the GraphQL schema."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-rust",children:"lazy_static! {\n    static ref CONTEXT: BuilderContext = BuilderContext::default();\n}\n"})}),"\n",(0,n.jsx)(r.p,{children:"The builder context has many config options, and allow you to customize the type mappings of the GraphQL schema. It also allows you to register field guards and lifecycle hooks."}),"\n",(0,n.jsxs)(r.p,{children:["Here it takes all the entities defined in ",(0,n.jsx)(r.code,{children:"entities/mod.rs"})," and register them to Seaography schema builder.\nIf you added custom input, output or query endpoints, this is where you'd register them dynamically into the schema.\nYou can also attach custom data to the GraphQL schema."]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-rust",children:"pub fn schema_builder(\n    context: &'static BuilderContext,\n    database: DatabaseConnection,\n    depth: Option<usize>,\n    complexity: Option<usize>,\n) -> SchemaBuilder {\n    let mut builder = Builder::new(context, database.clone());\n    builder = register_entity_modules(builder);\n    builder = register_active_enums(builder);\n    builder\n        .set_depth_limit(depth)\n        .set_complexity_limit(complexity)\n        .schema_builder()\n        .data(database)\n}\n"})}),"\n",(0,n.jsx)(r.h2,{id:"app",children:"App"}),"\n",(0,n.jsx)(r.h3,{id:"cargotoml",children:(0,n.jsx)(r.code,{children:"Cargo.toml"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-toml",children:'[dependencies.sea-orm]\nversion = "~2.0.0-rc"\nfeatures = ["sqlx-postgres", "runtime-tokio-native-tls", "seaography"]\n\n[dependencies.seaography]\nversion = "~2.0.0-rc" # seaography version\nfeatures = ["with-decimal", "with-chrono"]\n'})}),"\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.code,{children:"sea-orm"})," version must match ",(0,n.jsx)(r.code,{children:"seaography"}),"'s version. If you're using other database, replace ",(0,n.jsx)(r.code,{children:"sqlx-postgres"})," with ",(0,n.jsx)(r.code,{children:"sqlx-mysql"})," / ",(0,n.jsx)(r.code,{children:"sqlx-sqlite"}),"."]}),"\n",(0,n.jsxs)(r.p,{children:["There are some useful feature flags for ",(0,n.jsx)(r.code,{children:"seaography"}),":"]}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"macros"}),": derive macros"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"schema-meta"}),": additional endpoints for schema metadata"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"rbac"}),": RBAC support"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"field-snake-case"}),": use snake case instead of camel case for fields"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"field-pluralize"}),": pluralize complex fields. i.e. use ",(0,n.jsx)(r.code,{children:"posts"})," instead of ",(0,n.jsx)(r.code,{children:"post"})]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-json"}),": support JSON as scalar value"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-chrono"}),": support ",(0,n.jsx)(r.code,{children:"chrono"})," crate"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-time"}),": support ",(0,n.jsx)(r.code,{children:"time"})," crate"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-uuid"}),": support ",(0,n.jsx)(r.code,{children:"uuid"})," crate"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-decimal"}),": support ",(0,n.jsx)(r.code,{children:"rust_decimal"})," crate"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-bigdecimal"}),": support ",(0,n.jsx)(r.code,{children:"bigdecimal"})," crate"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.code,{children:"with-postgres-array"}),": support Postgres' array type"]}),"\n"]}),"\n",(0,n.jsx)(r.h3,{id:"mainrs",children:(0,n.jsx)(r.code,{children:"main.rs"})}),"\n",(0,n.jsxs)(r.p,{children:["This is the entry point to the web app. It setups the routes, i.e. ",(0,n.jsx)(r.code,{children:"GET"})," for GrapQL playground, ",(0,n.jsx)(r.code,{children:"POST"})," for handling GraphQL queries."]}),"\n",(0,n.jsx)(r.p,{children:"You will find a config section:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-rust",children:'lazy_static! {\n    static ref URL: String = env::var("URL").unwrap_or(..);\n    static ref ENDPOINT: String = env::var("ENDPOINT").unwrap_or(..);\n    static ref DATABASE_URL: String = env::var("DATABASE_URL").expect(..);\n    static ref DEPTH_LIMIT: Option<usize> = ..\n    static ref COMPLEXITY_LIMIT: Option<usize> = ..\n}\n'})}),"\n",(0,n.jsxs)(r.p,{children:["These are some config options you can override via environment variables, or by ",(0,n.jsx)(r.code,{children:".env"}),"."]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8032:(e,r,s)=>{s.d(r,{R:()=>o,x:()=>c});var t=s(2374);const n={},i=t.createContext(n);function o(e){const r=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),t.createElement(i.Provider,{value:r},e.children)}}}]);