"use strict";(self.webpackChunksea_ql_blog=self.webpackChunksea_ql_blog||[]).push([[2519],{1583:e=>{e.exports=JSON.parse('{"permalink":"/blog/2026-02-12-sea-orm-pro-notification","editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/Blog/blog/2026-02-12-sea-orm-pro-notification.md","source":"@site/blog/2026-02-12-sea-orm-pro-notification.md","title":"Notification in SeaORM Pro","description":"SeaORM Pro now supports sending notifications to Slack and Microsoft Teams via webhooks. Once configured, applications can send notifications based on triggers: for example, when a new order is created or an order item is updated.","date":"2026-02-12T00:00:00.000Z","tags":[{"inline":true,"label":"news","permalink":"/blog/tags/news"}],"readingTime":4.87,"hasTruncateMarker":false,"authors":[{"name":"SeaQL Team","title":"Chris Tsang","url":"https://github.com/SeaQL","imageURL":"https://www.sea-ql.org/blog/img/SeaQL.png","key":null,"page":null}],"frontMatter":{"slug":"2026-02-12-sea-orm-pro-notification","title":"Notification in SeaORM Pro","author":"SeaQL Team","author_title":"Chris Tsang","author_url":"https://github.com/SeaQL","author_image_url":"https://www.sea-ql.org/blog/img/SeaQL.png","image":"https://www.sea-ql.org/blog/img/SeaORM%202.0%20Banner.png","tags":["news"]},"unlisted":false,"nextItem":{"title":"SeaORM 2.0 Migration Guide","permalink":"/blog/2026-01-12-sea-orm-2.0"}}')},2348:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/sea-orm-pro-webhook_update_0030-df715f6339d82865e3850a87c4b2be67.png"},4204:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});var o=i(1583),a=i(4848),t=i(8453);const s={slug:"2026-02-12-sea-orm-pro-notification",title:"Notification in SeaORM Pro",author:"SeaQL Team",author_title:"Chris Tsang",author_url:"https://github.com/SeaQL",author_image_url:"https://www.sea-ql.org/blog/img/SeaQL.png",image:"https://www.sea-ql.org/blog/img/SeaORM%202.0%20Banner.png",tags:["news"]},r=void 0,l={authorsImageUrls:[void 0]},c=[{value:"The Design",id:"the-design",level:2},{value:"1. Application wide",id:"1-application-wide",level:4},{value:"2. Queue based",id:"2-queue-based",level:4},{value:"3. Application defined",id:"3-application-defined",level:4},{value:"4. Background worker",id:"4-background-worker",level:4},{value:"Configuring Webhooks",id:"configuring-webhooks",level:2},{value:"Schema",id:"schema",level:3},{value:"Config Webhook in Admin Panel",id:"config-webhook-in-admin-panel",level:3},{value:"Config Webhook programatically",id:"config-webhook-programatically",level:3},{value:"Setup Slack Webhook",id:"setup-slack-webhook",level:3},{value:"Setup Microsoft Teams Webhook",id:"setup-microsoft-teams-webhook",level:3},{value:"Sending Notifications",id:"sending-notifications",level:2},{value:"Define <code>after_save</code> Trigger",id:"define-after_save-trigger",level:3},{value:"Unicast / Multicast",id:"unicast--multicast",level:3},{value:"Formatting Messages",id:"formatting-messages",level:3},{value:"Notification Queue and Background Worker",id:"notification-queue-and-background-worker",level:3},{value:"Notification Status",id:"notification-status",level:3},{value:"SeaORM Pro Plus",id:"seaorm-pro-plus",level:2},{value:"What&#39;s Next?",id:"whats-next",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(9583).A+"",width:"2560",height:"1600"})}),"\n",(0,a.jsx)(n.p,{children:"SeaORM Pro now supports sending notifications to Slack and Microsoft Teams via webhooks. Once configured, applications can send notifications based on triggers: for example, when a new order is created or an order item is updated."}),"\n",(0,a.jsx)(n.h2,{id:"the-design",children:"The Design"}),"\n",(0,a.jsx)(n.h4,{id:"1-application-wide",children:"1. Application wide"}),"\n",(0,a.jsxs)(n.p,{children:["Notifications are not personalized; any user with ",(0,a.jsx)(n.code,{children:"select"})," permission on the ",(0,a.jsx)(n.code,{children:"sea_orm_notification"})," table can view them in the notification panel. Users who have visibility of the designated Slack channel or Teams channel will receive these messages."]}),"\n",(0,a.jsx)(n.p,{children:"Design: application level notification center."}),"\n",(0,a.jsx)(n.h4,{id:"2-queue-based",children:"2. Queue based"}),"\n",(0,a.jsx)(n.p,{children:"When an event is triggered in application code (for example, when a table or row is updated), a notification request is enqueued."}),"\n",(0,a.jsx)(n.p,{children:"Design: the event queue is intended to avoid adding latency to API requests."}),"\n",(0,a.jsx)(n.h4,{id:"3-application-defined",children:"3. Application defined"}),"\n",(0,a.jsx)(n.p,{children:"Notifications can be sent to one (unicast) or many webhooks (multicast). The application has full control over when and what to send."}),"\n",(0,a.jsx)(n.p,{children:"Design: application-defined logic tailored to business needs."}),"\n",(0,a.jsx)(n.h4,{id:"4-background-worker",children:"4. Background worker"}),"\n",(0,a.jsx)(n.p,{children:"A background worker picks up pending notifications from the queue and delivers them sequentially."}),"\n",(0,a.jsx)(n.p,{children:"Design: Notifications are delivered asynchronously by the background worker, avoiding bursts while preserving the order of events."}),"\n",(0,a.jsx)(n.h2,{id:"configuring-webhooks",children:"Configuring Webhooks"}),"\n",(0,a.jsx)(n.h3,{id:"schema",children:"Schema"}),"\n",(0,a.jsx)(n.p,{children:"A webhook has the following fields:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "sea_orm_webhook")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: WebhookId, // uniquely identify the webhook\n    pub platform: WebhookPlatform, // can be Slack / MsTeams\n    pub url: String, // webhook URL\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"config-webhook-in-admin-panel",children:"Config Webhook in Admin Panel"}),"\n",(0,a.jsxs)(n.p,{children:["Login to the admin dashboard. If you have read & update permission of the ",(0,a.jsx)(n.code,{children:"sea_orm_webhook"}),' table, you should able to see the "Webhook Settings" page appear on the left:']}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(4566).A+"",width:"2560",height:"1600"})}),"\n",(0,a.jsx)(n.p,{children:"You can perform quick update of webhook URL here."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(7495).A+"",width:"2560",height:"1600"})}),"\n",(0,a.jsx)(n.p,{children:"Double check the webhook URL is correct."}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(2348).A+"",width:"2560",height:"1600"})}),"\n",(0,a.jsx)(n.h3,{id:"config-webhook-programatically",children:"Config Webhook programatically"}),"\n",(0,a.jsxs)(n.p,{children:["You can also create new webhooks using database migration, such as ",(0,a.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm-pro-plus/blob/main/migration/src/m20260101_000001_webhook.rs",children:"m20260101_000001_webhook.rs"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'#[async_trait::async_trait]\nimpl MigrationTrait for Migration {\n    async fn up(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        let db = manager.get_connection();\n        sea_orm_notify::create_tables(db).await?;\n\n        webhook::ActiveModel {\n            id: NotSet,\n            platform: Set(WebhookPlatform::MsTeams),\n            url: Set("https://teams.microsoft.com/12345678".to_owned()),\n        }\n        .insert(db)\n        .await?;\n\n        webhook::ActiveModel {\n            id: NotSet,\n            platform: Set(WebhookPlatform::Slack),\n            url: Set("https://hooks.slack.com/12345678".to_owned()),\n        }\n        .insert(db)\n        .await?;\n\n        // ...\n    }\n\n    async fn down(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        // ...\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"setup-slack-webhook",children:"Setup Slack Webhook"}),"\n",(0,a.jsxs)(n.p,{children:["The step-by-step walkthrough is available ",(0,a.jsx)(n.a,{href:"https://www.sea-ql.org/sea-orm-pro/docs/notification/webhook/#setup-webhook-for-slack",children:"here"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"setup-microsoft-teams-webhook",children:"Setup Microsoft Teams Webhook"}),"\n",(0,a.jsxs)(n.p,{children:["The step-by-step walkthrough is available ",(0,a.jsx)(n.a,{href:"https://www.sea-ql.org/sea-orm-pro/docs/notification/webhook/#setup-webhook-for-microsoft-teams",children:"here"}),"."]}),"\n",(0,a.jsx)(n.h2,{id:"sending-notifications",children:"Sending Notifications"}),"\n",(0,a.jsxs)(n.h3,{id:"define-after_save-trigger",children:["Define ",(0,a.jsx)(n.code,{children:"after_save"})," Trigger"]}),"\n",(0,a.jsxs)(n.p,{children:["A common place to trigger notification is right after a database row being inserted or updated. For example in ",(0,a.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm-pro-plus/blob/main/src/models/address.rs",children:(0,a.jsx)(n.code,{children:"address.rs"})}),", we will trigger a notification after every successful insert or update:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'#[async_trait::async_trait]\nimpl ActiveModelBehavior for ActiveModel {\n    async fn after_save<C>(model: Model, db: &C, insert: bool) -> Result<Model, DbErr>\n    where\n        C: ConnectionTrait,\n    {\n        let action = if insert { "Inserted" } else { "Updated" };\n        let message = format!("{action} Address Model ID: {}", model.address_id);\n        sea_orm_notify::notify_all(db, &message).await?;\n        tracing::info!("{message}");\n        Ok(model)\n    }\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["Of course these triggers can also be defined at individual API endpoints, where access to ",(0,a.jsx)(n.code,{children:"DatabaseConnection"})," is provided."]}),"\n",(0,a.jsx)(n.h3,{id:"unicast--multicast",children:"Unicast / Multicast"}),"\n",(0,a.jsxs)(n.p,{children:["There are two methods to send notification, they are defined in ",(0,a.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm-pro-plus/blob/main/sea-orm-notify/src/lib.rs",children:(0,a.jsx)(n.code,{children:"sea-orm-notify/src/lib.rs"})}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:"// Send the notification to all webhook\nsea_orm_notify::notify_all(db, message).await?;\n\n// Send the notification to a specific webhook only\nsea_orm_notify::notify(db, WebhookId(1), message).await?;\n"})}),"\n",(0,a.jsx)(n.h3,{id:"formatting-messages",children:"Formatting Messages"}),"\n",(0,a.jsx)(n.p,{children:"You can format the notification messages with basic markdown."}),"\n",(0,a.jsxs)(n.p,{children:["Note that Slack has their own ",(0,a.jsx)(n.a,{href:"https://docs.slack.dev/messaging/formatting-message-text/",children:"dialect"}),".\nOn MS Teams, a subset of ",(0,a.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/microsoftteams/platform/resources/bot-v3/bots-text-formats",children:"HTML"})," is supported. SeaORM Pro automatically compiles markdown to HTML when sending via Teams."]}),"\n",(0,a.jsx)(n.h3,{id:"notification-queue-and-background-worker",children:"Notification Queue and Background Worker"}),"\n",(0,a.jsxs)(n.p,{children:["Notification will be stored in the ",(0,a.jsx)(n.code,{children:"sea_orm_notification"})," table and with a column named ",(0,a.jsx)(n.code,{children:"sent"})," to indicate the notification has been sent or not. A background task will send all pending notification in sequence from old to new, the source code is available at ",(0,a.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm-pro-plus/blob/main/sea-orm-notify/src/lib.rs",children:"sea-orm-notify/src/lib.rs"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["The background task should be spawned during the initialization of the Loco app in ",(0,a.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm-pro-plus/blob/main/src/app.rs#L47",children:"app.rs"}),":"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:"pub struct App;\n#[async_trait]\nimpl Hooks for App {\n    // ...\n\n    async fn initializers(ctx: &AppContext) -> Result<Vec<Box<dyn Initializer>>> {\n        let initializers: Vec<Box<dyn Initializer>> =\n            vec![Box::new(initializers::graphql::GraphQLInitializer)];\n\n        sea_orm_notify::run_background_task(ctx.db.clone());\n\n        Ok(initializers)\n    }\n\n    // ...\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"notification-status",children:"Notification Status"}),"\n",(0,a.jsx)(n.p,{children:"The \u2705 checkmark indicates that the notification was sent successfully."}),"\n",(0,a.jsxs)(n.p,{children:["You can click the ",(0,a.jsx)(n.code,{children:"\u27f3"})," (Resend) button to resend the notification immediately."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.img,{src:i(9583).A+"",width:"2560",height:"1600"})}),"\n",(0,a.jsx)(n.h2,{id:"seaorm-pro-plus",children:"SeaORM Pro Plus"}),"\n",(0,a.jsxs)(n.p,{children:["SeaORM Pro Plus unlocks Role Based Access Control (RBAC), notifications, and the frontend source code. We prioritize answering questions and feature requests from sponsors. You can access the repository as a ",(0,a.jsx)(n.a,{href:"https://github.com/sponsors/SeaQL/sponsorships?tier_id=249708",children:"Pro tier Sponsor"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"whats-next",children:"What's Next?"}),"\n",(0,a.jsx)(n.p,{children:"There's really a lot we want to build, to make SeaORM Pro suit the needs of every project. Please consider being a sponsor and take part in shaping its future!"}),"\n",(0,a.jsx)(n.p,{children:"Here's what we have in mind:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Single Sign On"}),": To be able to sign-in with Google Workspace or Microsoft Business email."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Audit Log"}),": And so, we'd want to keep a record of users' action and being able to audit them."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Tasks"}),": To be able to visualize and control scheduled tasks, and kick start once off tasks in ad-hoc way."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},4566:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/sea-orm-pro-webhook_update_0010-f17b92232ca69af7662d12c95a197091.png"},7495:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/sea-orm-pro-webhook_update_0020-bca2b1632c800d91fe4fe47ae4ba4f03.png"},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>r});var o=i(6540);const a={},t=o.createContext(a);function s(e){const n=o.useContext(t);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),o.createElement(t.Provider,{value:n},e.children)}},9583:(e,n,i)=>{i.d(n,{A:()=>o});const o=i.p+"assets/images/sea-orm-pro-webhook_trigger_0010-ac784127cbcc877b555e4e51ea84968a.png"}}]);