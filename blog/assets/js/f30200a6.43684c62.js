"use strict";(self.webpackChunksea_ql_blog=self.webpackChunksea_ql_blog||[]).push([[725],{401:a=>{a.exports=JSON.parse('{"permalink":"/blog/2022-02-07-whats-new-in-0.6.0","editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/Blog/blog/2022-02-07-whats-new-in-0.6.0.md","source":"@site/blog/2022-02-07-whats-new-in-0.6.0.md","title":"What\'s new in SeaORM 0.6.0","description":"\ud83c\udf89 We are pleased to release SeaORM 0.6.0 today! Here are some feature highlights \ud83c\udf1f:","date":"2022-02-07T00:00:00.000Z","tags":[{"inline":true,"label":"news","permalink":"/blog/tags/news"}],"readingTime":6.4,"hasTruncateMarker":false,"authors":[{"name":"SeaQL Team","title":"Chris Tsang","url":"https://github.com/SeaQL","imageURL":"https://www.sea-ql.org/SeaORM/img/SeaQL.png","key":null,"page":null}],"frontMatter":{"slug":"2022-02-07-whats-new-in-0.6.0","title":"What\'s new in SeaORM 0.6.0","author":"SeaQL Team","author_title":"Chris Tsang","author_url":"https://github.com/SeaQL","author_image_url":"https://www.sea-ql.org/SeaORM/img/SeaQL.png","tags":["news"]},"unlisted":false,"prevItem":{"title":"Google Summer of Code 2022","permalink":"/blog/gsoc-2022"},"nextItem":{"title":"What\'s new in SeaORM 0.5.0","permalink":"/blog/2022-01-01-whats-new-in-0.5.0"}}')},4538:(a,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>t,toc:()=>c});var t=s(401),n=s(8948),r=s(7630);const i={slug:"2022-02-07-whats-new-in-0.6.0",title:"What's new in SeaORM 0.6.0",author:"SeaQL Team",author_title:"Chris Tsang",author_url:"https://github.com/SeaQL",author_image_url:"https://www.sea-ql.org/SeaORM/img/SeaQL.png",tags:["news"]},o=void 0,l={authorsImageUrls:[void 0]},c=[{value:"Migration",id:"migration",level:2},{value:"Support DateTimeUtc &amp; DateTimeLocal in Model",id:"support-datetimeutc--datetimelocal-in-model",level:2},{value:"Mock Join Results",id:"mock-join-results",level:2},{value:"Support Max Connection Lifetime Option",id:"support-max-connection-lifetime-option",level:2},{value:"SeaORM CLI &amp; Codegen Updates",id:"seaorm-cli--codegen-updates",level:2},{value:"Sponsor",id:"sponsor",level:2},{value:"Community",id:"community",level:2}];function h(a){const e={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:["\ud83c\udf89 We are pleased to release SeaORM ",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/releases/tag/0.6.0",children:(0,n.jsx)(e.code,{children:"0.6.0"})})," today! Here are some feature highlights \ud83c\udf1f:"]}),"\n",(0,n.jsx)(e.h2,{id:"migration",children:"Migration"}),"\n",(0,n.jsxs)(e.p,{children:["[",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/pull/335",children:"#335"}),"] Version control you database schema with migrations written in SeaQuery or in raw SQL. View ",(0,n.jsx)(e.a,{href:"https://www.sea-ql.org/SeaORM/docs/migration/setting-up-migration",children:"migration docs"})," to learn more."]}),"\n",(0,n.jsxs)(e.ol,{children:["\n",(0,n.jsxs)(e.li,{children:["Setup the migration directory by executing ",(0,n.jsx)(e.code,{children:"sea-orm-cli migrate init"}),".","\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{children:"migration\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 README.md\n\u2514\u2500\u2500 src\n    \u251c\u2500\u2500 lib.rs\n    \u251c\u2500\u2500 m20220101_000001_create_table.rs\n    \u2514\u2500\u2500 main.rs\n"})}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["Defines the migration in SeaQuery.","\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-rust",children:'use sea_schema::migration::prelude::*;\n\npub struct Migration;\n\nimpl MigrationName for Migration {\n    fn name(&self) -> &str {\n        "m20220101_000001_create_table"\n    }\n}\n\n#[async_trait::async_trait]\nimpl MigrationTrait for Migration {\n    async fn up(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        manager\n            .create_table( ... )\n            .await\n    }\n\n    async fn down(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        manager\n            .drop_table( ... )\n            .await\n    }\n}\n'})}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["Apply the migration by executing ",(0,n.jsx)(e.code,{children:"sea-orm-cli migrate"}),".","\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-shell",children:"$ sea-orm-cli migrate\nApplying all pending migrations\nApplying migration 'm20220101_000001_create_table'\nMigration 'm20220101_000001_create_table' has been applied\n"})}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)("div",{class:"row",children:[(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Designed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/tyt2y3",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/1782664?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Chris Tsang"})})})]})]}),(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Contributed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Billy Chan"})})})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:"support-datetimeutc--datetimelocal-in-model",children:"Support DateTimeUtc & DateTimeLocal in Model"}),"\n",(0,n.jsxs)(e.p,{children:["[",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/pull/489",children:"#489"}),"] Represents database's timestamp column in Model with attribute of type ",(0,n.jsx)(e.code,{children:"DateTimeLocal"})," (",(0,n.jsx)(e.code,{children:"chrono::DateTime<Local>"}),") or ",(0,n.jsx)(e.code,{children:"DateTimeUtc"})," (",(0,n.jsx)(e.code,{children:"chrono::DateTime<Utc>"}),")."]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-rust",children:'#[derive(Clone, Debug, PartialEq, DeriveEntityModel)]\n#[sea_orm(table_name = "satellite")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub satellite_name: String,\n    pub launch_date: DateTimeUtc,\n    pub deployment_date: DateTimeLocal,\n}\n'})}),"\n",(0,n.jsxs)("div",{class:"row",children:[(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Proposed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/lz1998",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/9082086?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"lz1998"})})})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/tyt2y3",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/1782664?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Chris Tsang"})})})]})]}),(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Contributed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/charleschege",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/33346042?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Charles\xb7Chege"})})})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Billy Chan"})})})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:"mock-join-results",children:"Mock Join Results"}),"\n",(0,n.jsxs)(e.p,{children:["[",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/pull/455",children:"#455"}),"] Constructs mock results of related model with tuple of model."]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-rust",children:'let db = MockDatabase::new(DbBackend::Postgres)\n    // Mocking result of cake with its related fruit\n    .append_query_results(vec![vec![(\n        cake::Model {\n            id: 1,\n            name: "Apple Cake".to_owned(),\n        },\n        fruit::Model {\n            id: 2,\n            name: "Apple".to_owned(),\n            cake_id: Some(1),\n        },\n    )]])\n    .into_connection();\n\nassert_eq!(\n    cake::Entity::find()\n        .find_also_related(fruit::Entity)\n        .all(&db)\n        .await?,\n    vec![(\n        cake::Model {\n            id: 1,\n            name: "Apple Cake".to_owned(),\n        },\n        Some(fruit::Model {\n            id: 2,\n            name: "Apple".to_owned(),\n            cake_id: Some(1),\n        })\n    )]\n);\n'})}),"\n",(0,n.jsxs)("div",{class:"row",children:[(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Proposed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/cemoktra",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/15634263?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Bastian"})})})]})]}),(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Contributed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/cemoktra",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/15634263?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Bastian"})})})]}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Billy Chan"})})})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:"support-max-connection-lifetime-option",children:"Support Max Connection Lifetime Option"}),"\n",(0,n.jsxs)(e.p,{children:["[",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/pull/493",children:"#493"}),"] You can set the maximum lifetime of individual connection with the ",(0,n.jsx)(e.code,{children:"max_lifetime"})," method."]}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-rust",children:'let mut opt = ConnectOptions::new("protocol://username:password@host/database".to_owned());\nopt.max_lifetime(Duration::from_secs(8))\n    .max_connections(100)\n    .min_connections(5)\n    .connect_timeout(Duration::from_secs(8))\n    .idle_timeout(Duration::from_secs(8))\n    .sqlx_logging(true);\n\nlet db = Database::connect(opt).await?;\n'})}),"\n",(0,n.jsxs)("div",{class:"row",children:[(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Proposed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/Sytten",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/2366731?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"\xc9mile Fugulin"})})})]})]}),(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Contributed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Billy Chan"})})})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:"seaorm-cli--codegen-updates",children:"SeaORM CLI & Codegen Updates"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:["[",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/pull/433",children:"#433"}),"] Generates the ",(0,n.jsx)(e.code,{children:"column_name"})," macro attribute for column which is not named in snake case"]}),"\n",(0,n.jsxs)(e.li,{children:["[",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/pull/335",children:"#335"}),"] Introduces migration subcommands ",(0,n.jsx)(e.code,{children:"sea-orm-cli migrate"})]}),"\n"]}),"\n",(0,n.jsxs)("div",{class:"row",children:[(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Proposed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/Gabriel-Paulucci",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/43076727?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Gabriel Paulucci"})})})]})]}),(0,n.jsxs)("div",{class:"col col--6 margin-bottom--md",children:[(0,n.jsx)(e.p,{children:"Contributed by:"}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{}),(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/billy1624",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/30400950?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Billy Chan"})})})]})]})]}),"\n",(0,n.jsx)(e.h2,{id:"sponsor",children:"Sponsor"}),"\n",(0,n.jsxs)(e.p,{children:["Our ",(0,n.jsx)(e.a,{href:"https://github.com/sponsors/SeaQL",children:"GitHub Sponsor"})," profile is up! If you feel generous, a small donation will be greatly appreciated."]}),"\n",(0,n.jsx)(e.p,{children:"A big shout out to our sponsors \ud83d\ude07:"}),"\n",(0,n.jsxs)("div",{class:"row",children:[(0,n.jsx)("div",{class:"col col--6 margin-bottom--md",children:(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/Sytten",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/2366731?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"\xc9mile Fugulin"})})})]})}),(0,n.jsx)("div",{class:"col col--6 margin-bottom--md",children:(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/exzachlyvv",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/46034847?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Zachary Vander Velden"})})})]})}),(0,n.jsx)("div",{class:"col col--6 margin-bottom--md",children:(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/shanesveller",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/831?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Shane Sveller"})})})]})}),(0,n.jsx)("div",{class:"col col--6 margin-bottom--md",children:(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",href:"https://github.com/sakti",children:(0,n.jsx)("img",{src:"https://avatars.githubusercontent.com/u/196178?v=4"})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Sakti Dwi Cahyono"})})})]})}),(0,n.jsx)("div",{class:"col col--6 margin-bottom--md",children:(0,n.jsxs)("div",{class:"avatar",children:[(0,n.jsx)("a",{class:"avatar__photo-link avatar__photo avatar__photo--sm",children:(0,n.jsx)("img",{style:{width:"100%"},src:"data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="})}),(0,n.jsx)("div",{class:"avatar__intro",children:(0,n.jsx)("div",{class:"avatar__name",children:(0,n.jsx)(e.p,{children:"Unnamed Sponsor"})})})]})})]}),"\n",(0,n.jsx)(e.h2,{id:"community",children:"Community"}),"\n",(0,n.jsx)(e.p,{children:"SeaQL is a community driven project. We welcome you to participate, contribute and together build for Rust's future."}),"\n",(0,n.jsxs)(e.p,{children:["Here is the roadmap for SeaORM ",(0,n.jsx)(e.a,{href:"https://github.com/SeaQL/sea-orm/milestone/7",children:(0,n.jsx)(e.code,{children:"0.7.x"})}),"."]})]})}function d(a={}){const{wrapper:e}={...(0,r.R)(),...a.components};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(h,{...a})}):h(a)}},7630:(a,e,s)=>{s.d(e,{R:()=>i,x:()=>o});var t=s(7368);const n={},r=t.createContext(n);function i(a){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function o(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(n):a.components||n:i(a.components),t.createElement(r.Provider,{value:e},a.children)}}}]);