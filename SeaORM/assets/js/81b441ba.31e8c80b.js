"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[36234],{20952:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"advanced-query/custom-joins","title":"Custom Joins","description":"You can use the join method to construct complex join select queries. It takes any RelationDef defined in entity files, and you can define relation with the belongs_to method as well. Join type is specified using JoinType such as inner join, left join and right join.","source":"@site/versioned_docs/version-0.8.x/09-advanced-query/04-custom-joins.md","sourceDirName":"09-advanced-query","slug":"/advanced-query/custom-joins","permalink":"/SeaORM/docs/0.8.x/advanced-query/custom-joins","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/versioned_docs/version-0.8.x/09-advanced-query/04-custom-joins.md","tags":[],"version":"0.8.x","lastUpdatedBy":"Billy Chan","lastUpdatedAt":1749896402000,"sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Aggregate Functions","permalink":"/SeaORM/docs/0.8.x/advanced-query/aggregate-function"},"next":{"title":"Sub Query","permalink":"/SeaORM/docs/0.8.x/advanced-query/subquery"}}');var o=i(88790),s=i(77162);const a={},c="Custom Joins",r={},l=[];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"custom-joins",children:"Custom Joins"})}),"\n",(0,o.jsxs)(n.p,{children:["You can use the ",(0,o.jsx)(n.code,{children:"join"})," method to construct complex join select queries. It takes any ",(0,o.jsx)(n.code,{children:"RelationDef"})," defined in entity files, and you can define relation with the ",(0,o.jsx)(n.code,{children:"belongs_to"})," method as well. Join type is specified using ",(0,o.jsx)(n.code,{children:"JoinType"})," such as inner join, left join and right join."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-rust",children:'use sea_orm::{JoinType, RelationTrait};\nuse sea_query::Expr;\n\nassert_eq!(\n    cake::Entity::find()\n        .column_as(filling::Column::Id.count(), "count")\n        .join_rev(\n            // construct `RelationDef` on the fly\n            JoinType::InnerJoin,\n            cake_filling::Entity::belongs_to(cake::Entity)\n                .from(cake_filling::Column::CakeId)\n                .to(cake::Column::Id)\n                .into()\n        )\n        // reuse a `Relation` from existing Entity\n        .join(JoinType::InnerJoin, cake_filling::Relation::Filling.def())\n        .group_by(cake::Column::Id)\n        .having(filling::Column::Id.count().equals(Expr::value(2)))\n        .build(DbBackend::MySql)\n        .to_string(),\n    [\n        "SELECT `cake`.`id`, `cake`.`name`, COUNT(`filling`.`id`) AS `count` FROM `cake`",\n        "INNER JOIN `cake_filling` ON `cake_filling`.`cake_id` = `cake`.`id`",\n        "INNER JOIN `filling` ON `cake_filling`.`filling_id` = `filling`.`id`",\n        "GROUP BY `cake`.`id`",\n        "HAVING COUNT(`filling`.`id`) = 2",\n    ]\n    .join(" ")\n);\n'})}),"\n",(0,o.jsxs)(n.blockquote,{children:["\n",(0,o.jsxs)(n.p,{children:["You can use a custom ",(0,o.jsx)(n.code,{children:"struct"})," derived from the ",(0,o.jsx)(n.code,{children:"FromQueryResult"})," trait to handle the result of such complex query. See ",(0,o.jsx)(n.a,{href:"/SeaORM/docs/0.8.x/advanced-query/custom-select#handling-custom-selects",children:"here"})," for details."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},77162:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>c});var t=i(22374);const o={},s=t.createContext(o);function a(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);