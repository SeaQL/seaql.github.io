"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[16757],{1936:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"schema-statement/create-enum","title":"\u521b\u5efa\u679a\u4e3e","description":"\u4f60\u53ef\u4ee5\u901a\u8fc7 Schema \u8f85\u52a9 struct \u751f\u6210\u7528\u4e8e\u521b\u5efa\u5e26\u679a\u4e3e\u5217\u7684\u6570\u636e\u5e93\u8868\u7684 SQL \u8bed\u53e5\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/09-schema-statement/02-create-enum.md","sourceDirName":"09-schema-statement","slug":"/schema-statement/create-enum","permalink":"/SeaORM/zh-CN/docs/schema-statement/create-enum","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/docs/09-schema-statement/02-create-enum.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1772368507000,"sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u521b\u5efa\u8868","permalink":"/SeaORM/zh-CN/docs/schema-statement/create-table"},"next":{"title":"\u521b\u5efa\u7d22\u5f15","permalink":"/SeaORM/zh-CN/docs/schema-statement/create-index"}}');var a=t(74848),s=t(28453);const i={},c="\u521b\u5efa\u679a\u4e3e",m={},l=[{value:"\u5b57\u7b26\u4e32\u548c\u6574\u6570\u679a\u4e3e",id:"\u5b57\u7b26\u4e32\u548c\u6574\u6570\u679a\u4e3e",level:2},{value:"\u539f\u751f\u6570\u636e\u5e93\u679a\u4e3e",id:"\u539f\u751f\u6570\u636e\u5e93\u679a\u4e3e",level:2},{value:"PostgreSQL",id:"postgresql",level:3},{value:"MySQL",id:"mysql",level:3},{value:"SQLite",id:"sqlite",level:3}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"\u521b\u5efa\u679a\u4e3e",children:"\u521b\u5efa\u679a\u4e3e"})}),"\n",(0,a.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7 ",(0,a.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/schema/struct.Schema.html",children:(0,a.jsx)(n.code,{children:"Schema"})})," \u8f85\u52a9 struct \u751f\u6210\u7528\u4e8e\u521b\u5efa\u5e26\u679a\u4e3e\u5217\u7684\u6570\u636e\u5e93\u8868\u7684 SQL \u8bed\u53e5\u3002"]}),"\n",(0,a.jsx)(n.h2,{id:"\u5b57\u7b26\u4e32\u548c\u6574\u6570\u679a\u4e3e",children:"\u5b57\u7b26\u4e32\u548c\u6574\u6570\u679a\u4e3e"}),"\n",(0,a.jsx)(n.p,{children:"\u8fd9\u53ea\u662f\u6620\u5c04\u5230 Rust \u679a\u4e3e\u7684\u666e\u901a\u5b57\u7b26\u4e32/\u6574\u6570\u5217\u3002\u793a\u4f8b entity \u5b9a\u4e49\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",metastring:'title="active_enum.rs"',children:'use sea_orm::entity::prelude::*;\n\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(schema_name = "public", table_name = "active_enum")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub category: Option<Category>,\n    pub color: Option<Color>,\n}\n\n#[derive(Debug, Clone, PartialEq, Eq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "String", db_type = "String(StringLen::N(1))")]\npub enum Category {\n    #[sea_orm(string_value = "B")]\n    Big,\n    #[sea_orm(string_value = "S")]\n    Small,\n}\n\n#[derive(Debug, Clone, PartialEq, Eq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "i32", db_type = "Integer")]\npub enum Color {\n    #[sea_orm(num_value = 0)]\n    Black,\n    #[sea_orm(num_value = 1)]\n    White,\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u4f5c\u4e3a\u8bf4\u660e\uff0c\u8fd9\u4e9b\u679a\u4e3e\u53ea\u662f\u666e\u901a\u7684\u6570\u636e\u5e93\u5217\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:"use sea_orm::{sea_query, Schema};\n\nlet builder = db.get_database_backend();\nlet schema = Schema::new(builder);\n\nassert_eq!(\n    builder.build(&schema.create_table_from_entity(active_enum::Entity)),\n    builder.build(\n        &sea_query::Table::create()\n            .table(active_enum::Entity.table_ref())\n            .col(pk_auto(active_enum::Column::Id))\n            .col(string_len(active_enum::Column::Category, 1))\n            .col(integer(active_enum::Column::Color))\n            .to_owned()\n    )\n);\n"})}),"\n",(0,a.jsxs)(t,{children:[(0,a.jsx)("summary",{children:"\u6ce8\u610f\uff0c\u4e0d\u7b26\u5408 UAX#31 \u7684\u5b57\u7b26\u5c06\u6309\u5982\u4e0b\u6240\u793a\u8fdb\u884c\u8f6c\u6362\u3002"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'#[derive(Clone, Debug, PartialEq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "String", db_type = "String(StringLen::None)")]\npub enum StringValue {\n    #[sea_orm(string_value = "")]\n    Member1,\n    #[sea_orm(string_value = "$")]\n    Member2,\n    #[sea_orm(string_value = "$$")]\n    Member3,\n    #[sea_orm(string_value = "AB")]\n    Member4,\n    #[sea_orm(string_value = "A_B")]\n    Member5,\n    #[sea_orm(string_value = "A$B")]\n    Member6,\n    #[sea_orm(string_value = "0 123")]\n    Member7,\n}\n\n// The following will be generated\npub enum StringValueVariant {\n    __Empty,\n    _0x24,\n    _0x240x24,\n    Ab,\n    A0x5Fb,\n    A0x24B,\n    _0x300x20123,\n}\n'})})]}),"\n",(0,a.jsx)(n.h2,{id:"\u539f\u751f\u6570\u636e\u5e93\u679a\u4e3e",children:"\u539f\u751f\u6570\u636e\u5e93\u679a\u4e3e"}),"\n",(0,a.jsx)(n.p,{children:"\u679a\u4e3e\u652f\u6301\u56e0\u6570\u636e\u5e93\u800c\u5f02\u3002\u8ba9\u6211\u4eec\u9010\u4e00\u4ecb\u7ecd\u3002"}),"\n",(0,a.jsx)(n.p,{children:"\u8003\u8651\u4ee5\u4e0b entity\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",metastring:'title="active_enum.rs"',children:'use sea_orm::entity::prelude::*;\n\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(schema_name = "public", table_name = "active_enum")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub tea: Option<Tea>,\n}\n\n#[derive(Debug, Clone, PartialEq, Eq, EnumIter, DeriveActiveEnum)]\n#[sea_orm(rs_type = "String", db_type = "Enum", enum_name = "tea")]\npub enum Tea {\n    #[sea_orm(string_value = "EverydayTea")]\n    EverydayTea,\n    #[sea_orm(string_value = "BreakfastTea")]\n    BreakfastTea,\n}\n'})}),"\n",(0,a.jsxs)(n.p,{children:["\u6ce8\u610f ",(0,a.jsx)(n.code,{children:"db_type"})," \u548c\u989d\u5916\u7684 ",(0,a.jsx)(n.code,{children:"enum_name"})," \u5c5e\u6027\u3002"]}),"\n",(0,a.jsx)(n.h3,{id:"postgresql",children:"PostgreSQL"}),"\n",(0,a.jsxs)(n.p,{children:["PostgreSQL \u4e2d\u7684\u679a\u4e3e\u7531 ",(0,a.jsx)(n.a,{href:"https://docs.rs/sea-query/*/sea_query/extension/postgres/struct.TypeCreateStatement.html",children:(0,a.jsx)(n.code,{children:"TypeCreateStatement"})})," \u5b9a\u4e49\uff0c\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/schema/struct.Schema.html#method.create_enum_from_entity",children:(0,a.jsx)(n.code,{children:"Schema::create_enum_from_entity"})})," \u65b9\u6cd5\u4ece ",(0,a.jsx)(n.code,{children:"Entity"})," \u521b\u5efa\u3002"]}),"\n",(0,a.jsxs)(n.p,{children:["\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/schema/struct.Schema.html#method.create_enum_from_active_enum",children:(0,a.jsx)(n.code,{children:"Schema::create_enum_from_active_enum"})})," \u65b9\u6cd5\u4ece ",(0,a.jsx)(n.code,{children:"ActiveEnum"})," \u521b\u5efa\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'use sea_orm::{Schema, Statement};\n\nlet db_postgres = DbBackend::Postgres;\nlet schema = Schema::new(db_postgres);\n\nassert_eq!(\n    schema\n        .create_enum_from_entity(active_enum::Entity)\n        .iter()\n        .map(|stmt| db_postgres.build(stmt))\n        .collect::<Vec<_>>(),\n    [Statement::from_string(\n        db_postgres,\n        r#"CREATE TYPE "tea" AS ENUM (\'EverydayTea\', \'BreakfastTea\')"#\n    ),]\n);\n\nassert_eq!(\n    db_postgres.build(&schema.create_enum_from_active_enum::<Tea>().expect("Postgres only")),\n    Statement::from_string(\n        db_postgres,\n        r#"CREATE TYPE "tea" AS ENUM (\'EverydayTea\', \'BreakfastTea\')"#\n    )\n);\n\nassert_eq!(\n    db_postgres.build(&schema.create_table_from_entity(active_enum::Entity)),\n    Statement::from_string(\n        db_postgres,\n        [\n            r#"CREATE TABLE "public"."active_enum" ("#,\n            r#""id" serial NOT NULL PRIMARY KEY,"#,\n            r#""tea" tea"#,\n            r#")"#,\n        ]\n        .join(" ")\n    ),\n);\n'})}),"\n",(0,a.jsx)(n.h3,{id:"mysql",children:"MySQL"}),"\n",(0,a.jsxs)(n.p,{children:["\u5728 MySQL \u4e2d\uff0c\u679a\u4e3e\u5728\u521b\u5efa\u8868\u65f6\u5b9a\u4e49\uff0c\u56e0\u6b64\u4f60\u53ea\u9700\u8c03\u7528\u4e00\u6b21 ",(0,a.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/schema/struct.Schema.html#method.create_table_from_entity",children:(0,a.jsx)(n.code,{children:"Schema::create_table_from_entity"})}),"\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'use sea_orm::{Schema, Statement};\n\nlet db_mysql = DbBackend::MySql;\nlet schema = Schema::new(db_mysql);\n\nassert_eq!(\n    db_mysql.build(&schema.create_table_from_entity(active_enum::Entity)),\n    Statement::from_string(\n        db_mysql,\n        [\n            "CREATE TABLE `active_enum` (",\n            "`id` int NOT NULL AUTO_INCREMENT PRIMARY KEY,",\n            "`tea` ENUM(\'EverydayTea\', \'BreakfastTea\')",\n            ")",\n        ]\n        .join(" ")\n    ),\n);\n'})}),"\n",(0,a.jsx)(n.h3,{id:"sqlite",children:"SQLite"}),"\n",(0,a.jsxs)(n.p,{children:["SQLite \u4e0d\u652f\u6301\u679a\u4e3e\uff0c\u56e0\u6b64\u5c06\u5b58\u50a8\u4e3a ",(0,a.jsx)(n.code,{children:"TEXT"}),"\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'use sea_orm::{Schema, Statement};\n\nlet db_sqlite = DbBackend::Sqlite;\nlet schema = Schema::new(db_sqlite);\n\nassert_eq!(\n    db_sqlite.build(&schema.create_enum_from_entity(active_enum::Entity)),\n    Statement::from_string(\n        db_sqlite,\n        [\n            "CREATE TABLE `active_enum` (",\n            "`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT,",\n            "`tea` text",\n            ")",\n        ]\n        .join(" ")\n    ),\n);\n'})})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>c});var r=t(96540);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);