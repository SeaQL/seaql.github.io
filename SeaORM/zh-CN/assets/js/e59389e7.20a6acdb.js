"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[24400],{28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>i});var a=r(96540);const s={},t=a.createContext(s);function l(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),a.createElement(t.Provider,{value:n},e.children)}},87476:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>_,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"relation/complex-relations","title":"\u590d\u6742\u5173\u8054","description":"\u94fe\u63a5\u5173\u8054","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/06-relation/04-complex-relations.md","sourceDirName":"06-relation","slug":"/relation/complex-relations","permalink":"/SeaORM/zh-CN/docs/relation/complex-relations","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/docs/06-relation/04-complex-relations.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1772389428000,"sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u591a\u5bf9\u591a","permalink":"/SeaORM/zh-CN/docs/relation/many-to-many"},"next":{"title":"\u6a21\u578b\u52a0\u8f7d\u5668","permalink":"/SeaORM/zh-CN/docs/relation/model-loader"}}');var s=r(74848),t=r(28453);const l={},i="\u590d\u6742\u5173\u8054",o={},d=[{value:"\u94fe\u63a5\u5173\u8054",id:"\u94fe\u63a5\u5173\u8054",level:2},{value:"\u5b9a\u4e49\u94fe\u63a5",id:"\u5b9a\u4e49\u94fe\u63a5",level:3},{value:"\u5ef6\u8fdf\u52a0\u8f7d",id:"\u5ef6\u8fdf\u52a0\u8f7d",level:3},{value:"\u9884\u5148\u52a0\u8f7d",id:"\u9884\u5148\u52a0\u8f7d",level:3},{value:"\u81ea\u5f15\u7528\u5173\u8054",id:"\u81ea\u5f15\u7528\u5173\u8054",level:2},{value:"\u5c5e\u4e8e",id:"\u5c5e\u4e8e",level:3},{value:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668",id:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668",level:4},{value:"\u6a21\u578b\u52a0\u8f7d\u5668",id:"\u6a21\u578b\u52a0\u8f7d\u5668",level:4},{value:"\u62e5\u6709\u591a (M-N)",id:"\u62e5\u6709\u591a-m-n",level:3},{value:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668",id:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668-1",level:4},{value:"\u6a21\u578b\u52a0\u8f7d\u5668",id:"\u6a21\u578b\u52a0\u8f7d\u5668-1",level:4},{value:"\u83f1\u5f62\u5173\u8054",id:"\u83f1\u5f62\u5173\u8054",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u590d\u6742\u5173\u8054",children:"\u590d\u6742\u5173\u8054"})}),"\n",(0,s.jsx)(n.h2,{id:"\u94fe\u63a5\u5173\u8054",children:"\u94fe\u63a5\u5173\u8054"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Related"})," \u7279\u5f81\u662f\u6211\u4eec\u5728\u5b9e\u4f53\u5173\u7cfb\u56fe\u4e2d\u7ed8\u5236\u7684\u7bad\u5934\uff081-1\u30011-N\u3001M-N\uff09\u7684\u8868\u793a\u3002\u4e00\u4e2a ",(0,s.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/entity/trait.Linked.html",children:(0,s.jsx)(n.code,{children:"Linked"})})," \u7531\u4e00\u7cfb\u5217\u5173\u7cfb\u7ec4\u6210\uff0c\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u5f88\u6709\u7528\uff1a"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\u4e00\u5bf9 Entity \u4e4b\u95f4\u5b58\u5728\u591a\u6761 join \u8def\u5f84\uff0c\u65e0\u6cd5\u5b9e\u73b0 ",(0,s.jsx)(n.code,{children:"Related"})]}),"\n",(0,s.jsx)(n.li,{children:"\u5728\u5173\u7cfb\u67e5\u8be2\u4e2d\u8de8\u591a\u4e2a Entity \u8fdb\u884c join"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u5b9e\u73b0 ",(0,s.jsx)(n.code,{children:"Linked"})," \u7279\u5f81\u662f\u5b8c\u5168\u53ef\u9009\u7684\uff0c\u56e0\u4e3a SeaORM \u4e2d\u8fd8\u6709\u5176\u4ed6\u65b9\u5f0f\u8fdb\u884c\u5173\u7cfb\u67e5\u8be2\uff0c\u8fd9\u5c06\u5728\u540e\u7eed\u7ae0\u8282\u4e2d\u8bf4\u660e\u3002\n\u5b9e\u73b0 ",(0,s.jsx)(n.code,{children:"Linked"})," \u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a ",(0,s.jsx)(n.code,{children:"find_*_linked"})," \u8f85\u52a9\u65b9\u6cd5\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u4e00\u4e2a\u5730\u65b9\u5b9a\u4e49\u5173\u7cfb\u3002"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5b9a\u4e49\u94fe\u63a5",children:"\u5b9a\u4e49\u94fe\u63a5"}),"\n",(0,s.jsxs)(n.p,{children:["\u4ee5",(0,s.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/blob/master/src/tests_cfg/entity_linked.rs",children:"\u6b64"}),"\u4e3a\u4f8b\uff0c\u6211\u4eec\u901a\u8fc7\u4e2d\u95f4\u7684 ",(0,s.jsx)(n.code,{children:"cake_filling"})," \u8868\u8fde\u63a5 cake \u548c filling\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="entity/links.rs"',children:"pub struct CakeToFilling;\n\nimpl Linked for CakeToFilling {\n    type FromEntity = cake::Entity;\n    type ToEntity = filling::Entity;\n\n    fn link(&self) -> Vec<RelationDef> {\n        vec![\n            cake_filling::Relation::Cake.def().rev(), // cake -> cake_filling\n            cake_filling::Relation::Filling.def(),    // cake_filling -> filling\n        ]\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5ef6\u8fdf\u52a0\u8f7d",children:"\u5ef6\u8fdf\u52a0\u8f7d"}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,s.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/entity/prelude/trait.ModelTrait.html#method.find_linked",children:(0,s.jsx)(n.code,{children:"find_linked"})})," \u65b9\u6cd5\u67e5\u627e\u53ef\u4ee5\u586b\u5165\u86cb\u7cd5\u7684\u914d\u6599\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let cake_model = cake::Model {\n    id: 12,\n    name: "Chocolate".into(),\n};\n\nassert_eq!(\n    cake_model\n        .find_linked(cake::CakeToFilling)\n        .build(DbBackend::MySql)\n        .to_string(),\n    [\n        "SELECT `filling`.`id`, `filling`.`name`, `filling`.`vendor_id`",\n        "FROM `filling`",\n        "INNER JOIN `cake_filling` AS `r0` ON `r0`.`filling_id` = `filling`.`id`",\n        "INNER JOIN `cake` AS `r1` ON `r1`.`id` = `r0`.`cake_id`",\n        "WHERE `r1`.`id` = 12",\n    ]\n    .join(" ")\n);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u9884\u5148\u52a0\u8f7d",children:"\u9884\u5148\u52a0\u8f7d"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/entity/prelude/struct.Select.html#method.find_also_linked",children:(0,s.jsx)(n.code,{children:"find_also_linked"})})," \u662f ",(0,s.jsx)(n.code,{children:"find_also_related"})," \u7684\u5bf9\u5e94\u65b9\u6cd5\uff1b",(0,s.jsx)(n.a,{href:"https://docs.rs/sea-orm/2.0.0-rc.25/sea_orm/entity/prelude/struct.Select.html#method.find_with_linked",children:(0,s.jsx)(n.code,{children:"find_with_linked"})})," \u662f ",(0,s.jsx)(n.code,{children:"find_with_related"})," \u7684\u5bf9\u5e94\u65b9\u6cd5\uff1a"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'assert_eq!(\n    cake::Entity::find()\n        .find_also_linked(links::CakeToFilling)\n        .build(DbBackend::MySql)\n        .to_string(),\n    [\n        "SELECT `cake`.`id` AS `A_id`, `cake`.`name` AS `A_name`,",\n        "`r1`.`id` AS `B_id`, `r1`.`name` AS `B_name`, `r1`.`vendor_id` AS `B_vendor_id`",\n        "FROM `cake`",\n        "LEFT JOIN `cake_filling` AS `r0` ON `cake`.`id` = `r0`.`cake_id`",\n        "LEFT JOIN `filling` AS `r1` ON `r0`.`filling_id` = `r1`.`id`",\n    ]\n    .join(" ")\n);\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u81ea\u5f15\u7528\u5173\u8054",children:"\u81ea\u5f15\u7528\u5173\u8054"}),"\n",(0,s.jsx)(n.h3,{id:"\u5c5e\u4e8e",children:"\u5c5e\u4e8e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="staff.rs"',children:'use sea_orm::entity::prelude::*;\n\n#[sea_orm::model]\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "staff")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n    pub reports_to_id: Option<i32>,\n    #[sea_orm(\n        self_ref,\n        relation_enum = "ReportsTo",\n        relation_reverse = "Manages",\n        from = "reports_to_id",\n        to = "id"\n    )]\n    pub reports_to: HasOne<Entity>,\n    #[sea_orm(self_ref, relation_enum = "Manages", relation_reverse = "ReportsTo")]\n    pub manages: HasMany<Entity>,\n}\n\nimpl ActiveModelBehavior for ActiveModel {}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["(or using ",(0,s.jsx)(n.code,{children:"compact_model"})," shim)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="staff.rs"',children:'use sea_orm::entity::prelude::*;\n\n#[sea_orm::compact_model]\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "staff")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n    pub reports_to_id: Option<i32>,\n    #[sea_orm(self_ref, relation_enum = "ReportsTo")]\n    pub reports_to: HasOne<Entity>,\n    #[sea_orm(self_ref, relation_enum = "Manages")]\n    pub manages: HasMany<Entity>,\n}\n\n#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]\npub enum Relation {\n    #[sea_orm(belongs_to = "Entity", from = "Column::ReportsToId", to = "Column::Id")]\n    ReportsTo,\n    #[sea_orm(has_many = "Entity", via_rel = "Relation::ReportsTo")]\n    Manages,\n}\n\nimpl ActiveModelBehavior for ActiveModel {}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668",children:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let staff = staff_compact::Entity::load()\n    .with(staff_compact::Relation::ReportsTo)\n    .with(staff_compact::Relation::Manages)\n    .all(db)\n    .await?;\n\nassert_eq!(staff[0].name, "Alan");\nassert_eq!(staff[0].reports_to, None);\nassert_eq!(staff[0].manages[0].name, "Ben");\nassert_eq!(staff[0].manages[1].name, "Alice");\n\nassert_eq!(staff[1].name, "Ben");\nassert_eq!(staff[1].reports_to.as_ref().unwrap().name, "Alan");\nassert!(staff[1].manages.is_empty());\n\nassert_eq!(staff[2].name, "Alice");\nassert_eq!(staff[1].reports_to.as_ref().unwrap().name, "Alan");\nassert!(staff[2].manages.is_empty());\n\nassert_eq!(staff[3].name, "Elle");\nassert_eq!(staff[3].reports_to, None);\nassert!(staff[3].manages.is_empty());\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u6a21\u578b\u52a0\u8f7d\u5668",children:"\u6a21\u578b\u52a0\u8f7d\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let staff = staff::Entity::find()\n    .order_by_asc(staff::Column::Id)\n    .all(db)\n    .await?;\n\nlet reports_to = staff\n    .load_self(staff::Entity, staff::Relation::ReportsTo, db)\n    .await?;\n\nassert_eq!(staff[0].name, "Alan");\nassert_eq!(reports_to[0], None);\n\nassert_eq!(staff[1].name, "Ben");\nassert_eq!(reports_to[1].as_ref().unwrap().name, "Alan");\n\nassert_eq!(staff[2].name, "Alice");\nassert_eq!(reports_to[2].as_ref().unwrap().name, "Alan");\n\nassert_eq!(staff[3].name, "Elle");\nassert_eq!(reports_to[3], None);\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u53cd\u5411\u4e5f\u53ef\u4ee5\u5de5\u4f5c\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'let manages = staff\n    .load_self_many(staff::Entity, staff::Relation::Manages, db)\n    .await?;\n\nassert_eq!(staff[0].name, "Alan");\nassert_eq!(manages[0].len(), 2);\nassert_eq!(manages[0][0].name, "Ben");\nassert_eq!(manages[0][1].name, "Alice");\n\nassert_eq!(staff[1].name, "Ben");\nassert_eq!(manages[1].len(), 0);\n\nassert_eq!(staff[2].name, "Alice");\nassert_eq!(manages[2].len(), 0);\n\nassert_eq!(staff[3].name, "Elle");\nassert_eq!(manages[3].len(), 0);\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u62e5\u6709\u591a-m-n",children:"\u62e5\u6709\u591a (M-N)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="user.rs"',children:'#[sea_orm::model]\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "user")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n    #[sea_orm(self_ref, via = "user_follower", from = "User", to = "Follower")]\n    pub followers: HasMany<Entity>,\n    #[sea_orm(self_ref, via = "user_follower", reverse)]\n    pub following: HasMany<Entity>,\n}\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="user_follower.rs"',children:'#[sea_orm::model]\n#[derive(Clone, Debug, PartialEq, DeriveEntityModel, Eq)]\n#[sea_orm(table_name = "user_follower")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub user_id: i32,\n    #[sea_orm(primary_key)]\n    pub follower_id: i32,\n    #[sea_orm(belongs_to, from = "user_id", to = "id")]\n    pub user: Option<super::user::Entity>,\n    #[sea_orm(belongs_to, relation_enum = "Follower", from = "follower_id", to = "id")]\n    pub follower: Option<super::user::Entity>,\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["(or with ",(0,s.jsx)(n.code,{children:"compact_model"}),")"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'#[sea_orm::compact_model]\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "user")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n    #[sea_orm(self_ref, via = "user_follower")]\n    pub followers: HasMany<Entity>,\n    #[sea_orm(self_ref, via = "user_follower", reverse)]\n    pub following: HasMany<Entity>,\n}\n\nimpl RelatedSelfVia<super::user_follower::Entity> for Entity {\n    fn to() -> RelationDef {\n        super::user_follower::Relation::Follower.def()\n    }\n    fn via() -> RelationDef {\n        super::user_follower::Relation::User.def().rev()\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668-1",children:"\u5b9e\u4f53\u6279\u91cf\u52a0\u8f7d\u5668"}),"\n",(0,s.jsx)(n.p,{children:"Join \u8def\u5f84\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"user -> profile\n     -> user_follower -> user -> profile\n     -> user_follower (reverse) -> user -> profile\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"let users = user::Entity::load()\n    .with(profile::Entity)\n    .with((user_follower::Entity, profile::Entity))\n    .with((user_follower::Entity::REVERSE, profile::Entity))\n    .all(db)\n    .await?;\n\nassert_eq!(users[1].profile, bob.profile);\nassert_eq!(users[1].followers.len(), 1);\nassert_eq!(users[1].followers[0], sam);\nassert_eq!(users[1].following.len(), 1);\nassert_eq!(users[1].following[0], alice);\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u6a21\u578b\u52a0\u8f7d\u5668-1",children:"\u6a21\u578b\u52a0\u8f7d\u5668"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"let users = user::Entity::find().all(db).await?;\nlet followers = users.load_self_via(user_follower::Entity, db).await?;\nlet following = users.load_self_via_rev(user_follower::Entity, db).await?;\n\nassert_eq!(users[1], bob);\nassert_eq!(followers[1], [sam.clone()]);\nassert_eq!(following[1], [alice.clone()]);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u83f1\u5f62\u5173\u8054",children:"\u83f1\u5f62\u5173\u8054"}),"\n",(0,s.jsxs)(n.p,{children:["\u6709\u65f6\u4e00\u5bf9 Entity \u4e4b\u95f4\u5b58\u5728\u591a\u4e2a\u5173\u7cfb\u3002\u8fd9\u91cc\u6211\u4eec\u4e3e\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u4f8b\u5b50\uff1a",(0,s.jsx)(n.code,{children:"Bakery"})," \u53ef\u4ee5\u6709\u591a\u4e2a ",(0,s.jsx)(n.code,{children:"Worker"}),"\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:'#[sea_orm::model]\n#[derive(Clone, Debug, PartialEq, DeriveEntityModel)]\n#[sea_orm(table_name = "bakery")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n    pub manager_id: i32,\n    pub cashier_id: i32,\n    #[sea_orm(belongs_to, relation_enum = "Manager", from = "manager_id", to = "id")]\n    pub manager: HasOne<super::worker::Entity>,\n    #[sea_orm(belongs_to, relation_enum = "Cashier", from = "cashier_id", to = "id")]\n    pub cashier: HasOne<super::worker::Entity>,\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\u6211\u4eec\u5982\u4f55\u5b9a\u4e49 ",(0,s.jsx)(n.code,{children:"Worker"})," Entity\uff1f\n\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c",(0,s.jsx)(n.code,{children:"has_many"})," \u4f1a\u8c03\u7528 ",(0,s.jsx)(n.code,{children:"Related"})," \u7279\u5f81\u6765\u5b9a\u4e49\u5173\u7cfb\u3002\n\u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528 ",(0,s.jsx)(n.code,{children:"via_rel"})," \u5c5e\u6027\u624b\u52a8\u6307\u5b9a\u76f8\u5173 Entity \u7684 ",(0,s.jsx)(n.code,{children:"Relation"})," \u53d8\u4f53\u3002"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="worker.rs"',children:'#[sea_orm::model]\n#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "worker")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n    #[sea_orm(has_many, relation_enum = "BakeryManager", via_rel = "Manager")]\n    pub manager_of: HasMany<super::bakery::Entity>,\n    #[sea_orm(has_many, relation_enum = "BakeryCashier", via_rel = "Cashier")]\n    pub cashier_of: HasMany<super::bakery::Entity>,\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u5bf9\u4e8e compact Entity\uff0c\u770b\u8d77\u6765\u50cf\u8fd9\u6837\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="worker.rs"',children:'#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "worker")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub name: String,\n}\n\n#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]\npub enum Relation {\n    #[sea_orm(has_many = "super::bakery::Entity", via_rel = "Relation::Manager")]\n    BakeryManager,\n    #[sea_orm(has_many = "super::bakery::Entity", via_rel = "Relation::Cashier")]\n    BakeryCashier,\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:"\u7136\u540e\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\u5173\u7cfb\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"worker::Entity::find().join(JoinType::LeftJoin, worker::Relation::BakeryManager.def());\n"})})]})}function _(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);