"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[97743],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var i=t(96540);const r={},o=i.createContext(r);function s(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),i.createElement(o.Provider,{value:n},e.children)}},34696:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"relation/one-to-many","title":"\u4e00\u5bf9\u591a","description":"\u4e00\u5bf9\u591a\u5173\u7cfb\u4e0e\u4e00\u5bf9\u4e00\u5173\u7cfb\u7c7b\u4f3c\u3002\u5728\u4e0a\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u4e3e\u4e86\u300c\u4e00\u4e2a Cake Entity \u6700\u591a\u6709\u4e00\u4e2a Fruit \u914d\u6599\u300d\u7684\u4f8b\u5b50\u3002\u8981\u4f7f\u5176\u6210\u4e3a\u4e00\u5bf9\u591a\u5173\u7cfb\uff0c\u6211\u4eec\u53ea\u9700\u79fb\u9664\u300c\u6700\u591a\u4e00\u4e2a\u300d\u7684\u7ea6\u675f\u3002\u8fd9\u6837\uff0c\u4e00\u4e2a Cake Entity \u5c31\u53ef\u4ee5\u6709\u591a\u4e2a Fruit \u914d\u6599\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/06-relation/02-one-to-many.md","sourceDirName":"06-relation","slug":"/relation/one-to-many","permalink":"/SeaORM/zh-CN/docs/relation/one-to-many","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/docs/06-relation/02-one-to-many.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1772368507000,"sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4e00\u5bf9\u4e00","permalink":"/SeaORM/zh-CN/docs/relation/one-to-one"},"next":{"title":"\u591a\u5bf9\u591a","permalink":"/SeaORM/zh-CN/docs/relation/many-to-many"}}');var r=t(74848),o=t(28453);const s={},a="\u4e00\u5bf9\u591a",l={},d=[{value:"\u5b9a\u4e49\u5173\u8054",id:"\u5b9a\u4e49\u5173\u8054",level:2},{value:"\u5b9a\u4e49\u53cd\u5411\u5173\u8054",id:"\u5b9a\u4e49\u53cd\u5411\u5173\u8054",level:2},{value:"\u7ec4\u5408\u5916\u952e",id:"\u7ec4\u5408\u5916\u952e",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,o.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u4e00\u5bf9\u591a",children:"\u4e00\u5bf9\u591a"})}),"\n",(0,r.jsxs)(n.p,{children:["\u4e00\u5bf9\u591a\u5173\u7cfb\u4e0e\u4e00\u5bf9\u4e00\u5173\u7cfb\u7c7b\u4f3c\u3002\u5728\u4e0a\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u4e3e\u4e86\u300c\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"Cake"})," Entity \u6700\u591a\u6709\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"Fruit"})," \u914d\u6599\u300d\u7684\u4f8b\u5b50\u3002\u8981\u4f7f\u5176\u6210\u4e3a\u4e00\u5bf9\u591a\u5173\u7cfb\uff0c\u6211\u4eec\u53ea\u9700\u79fb\u9664\u300c\u6700\u591a\u4e00\u4e2a\u300d\u7684\u7ea6\u675f\u3002\u8fd9\u6837\uff0c\u4e00\u4e2a ",(0,r.jsx)(n.code,{children:"Cake"})," Entity \u5c31\u53ef\u4ee5\u6709\u591a\u4e2a ",(0,r.jsx)(n.code,{children:"Fruit"})," \u914d\u6599\u3002"]}),"\n",(0,r.jsx)(n.h2,{id:"\u5b9a\u4e49\u5173\u8054",children:"\u5b9a\u4e49\u5173\u8054"}),"\n",(0,r.jsxs)(n.p,{children:["\u8fd9\u4e0e\u5b9a\u4e49\u4e00\u5bf9\u4e00\u5173\u7cfb\u51e0\u4e4e\u76f8\u540c\uff1b\u552f\u4e00\u7684\u533a\u522b\u662f\u8fd9\u91cc\u6211\u4eec\u4f7f\u7528 ",(0,r.jsx)(n.code,{children:"has_many"})," \u6ce8\u89e3\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:'{7,8} title="entity/cake.rs"',children:'#[sea_orm::model]\n#[derive(DeriveEntityModel, ..)]\n#[sea_orm(table_name = "cake")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    #[sea_orm(has_many)]\n    pub fruit: HasMany<super::fruit::Entity>,\n}\n'})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"\u5c55\u5f00\u540e\uff1a"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:"{3,4,9}",children:'#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]\npub enum Relation {\n    #[sea_orm(has_many = "super::fruit::Entity")]\n    Fruit,\n}\n\nimpl Related<super::fruit::Entity> for Entity {\n    fn to() -> RelationDef {\n        Relation::Fruit.def()\n    }\n}\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"\u5b9a\u4e49\u53cd\u5411\u5173\u8054",children:"\u5b9a\u4e49\u53cd\u5411\u5173\u8054"}),"\n",(0,r.jsxs)(n.p,{children:["\u4e0e\u5b9a\u4e49\u4e00\u5bf9\u4e00\u53cd\u5411\u5173\u7cfb\u76f8\u540c\uff0c\u53ea\u662f\u6ca1\u6709\u552f\u4e00\u952e\u3002\u7ecf\u9a8c\u6cd5\u5219\u662f\uff1a\u59cb\u7ec8\u5728\u5e26\u6709\u5916\u952e ",(0,r.jsx)(n.code,{children:"xxx_id"})," \u7684 Entity \u4e0a\u5b9a\u4e49 ",(0,r.jsx)(n.code,{children:"belongs_to"}),"\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:'{9,10} title="entity/fruit.rs"',children:'#[sea_orm::model]\n#[derive(DeriveEntityModel, ..)]\n#[sea_orm(table_name = "fruit")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    // without unique\n    pub cake_id: Option<i32>,\n    #[sea_orm(belongs_to, from = "cake_id", to = "id")]\n    pub cake: HasOne<super::cake::Entity>,\n}\n'})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"\u5c55\u5f00\u540e\uff1a"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]\npub enum Relation {\n    #[sea_orm(\n        belongs_to = "super::cake::Entity",\n        from = "Column::CakeId",\n        to = "super::cake::Column::Id"\n    )]\n    Cake,\n}\n\nimpl Related<super::cake::Entity> for Entity {\n    fn to() -> RelationDef {\n        Relation::Cake.def()\n    }\n}\n'})})]}),"\n",(0,r.jsx)(n.h2,{id:"\u7ec4\u5408\u5916\u952e",children:"\u7ec4\u5408\u5916\u952e"}),"\n",(0,r.jsx)(n.p,{children:"\u4f7f\u7528\u5143\u7ec4\u8bed\u6cd5\u652f\u6301\u590d\u5408\u5916\u952e\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:'title="composite_a.rs"',children:'#[sea_orm::model]\n#[sea_orm(table_name = "composite_a")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    #[sea_orm(unique_key = "pair")]\n    pub left_id: i32,\n    #[sea_orm(unique_key = "pair")]\n    pub right_id: i32,\n    #[sea_orm(has_one)]\n    pub b: Option<super::composite_b::Entity>,\n}\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:'title="composite_b.rs"',children:'#[sea_orm::model]\n#[sea_orm(table_name = "composite_b")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    pub left_id: i32,\n    pub right_id: i32,\n    #[sea_orm(belongs_to, from = "(left_id, right_id)", to = "(left_id, right_id)")]\n    pub a: Option<super::composite_a::Entity>,\n}\n'})}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"\u5c55\u5f00\u540e\uff1a"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",metastring:'title="composite_b.rs"',children:'#[derive(Copy, Clone, Debug, EnumIter, DeriveRelation)]\npub enum Relation {\n    #[sea_orm(\n        belongs_to = "super::composite_a::Entity",\n        from = "(Column::LeftId, Column::RightId)",\n        to = "(super::composite_a::Column::LeftId, super::composite_a::Column::RightId)",\n    )]\n    CakeFilling,\n}\n'})})]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);