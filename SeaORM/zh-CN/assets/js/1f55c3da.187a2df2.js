"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[95299],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>r});var i=s(96540);const t={},l=i.createContext(t);function a(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),i.createElement(l.Provider,{value:n},e.children)}},99863:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"internal-design/diesel","title":"\u4e0e Diesel \u5bf9\u6bd4","description":"\u8fd9\u662f\u4e00\u4e2a\u4e0d\u53ef\u907f\u514d\u4e14\u5bcc\u6709\u4e89\u8bae\u7684\u8bdd\u9898\uff0cSeaORM \u4e0e Diesel \u4e4b\u95f4\u7684\u6280\u672f\u5dee\u5f02\u5df2\u88ab\u5e7f\u6cdb\u8ba8\u8bba\u3002\u56e0\u6b64\uff0c\u6211\u60f3\u6307\u51fa\u6211\u4eec\u523b\u610f\u505a\u51fa\u7684\u4e00\u4e9b\u4e0d\u540c\u8bbe\u8ba1\u9009\u62e9\uff0c\u65e8\u5728\u8ba9\u4f7f\u7528 SeaORM \u7684\u4f53\u9a8c\u66f4\u6109\u5feb\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/13-internal-design/04-diesel.md","sourceDirName":"13-internal-design","slug":"/internal-design/diesel","permalink":"/SeaORM/zh-CN/docs/internal-design/diesel","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/docs/13-internal-design/04-diesel.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1772368507000,"sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u67b6\u6784","permalink":"/SeaORM/zh-CN/docs/internal-design/architecture"},"next":{"title":"\u5c55\u5f00\u7684 Entity \u683c\u5f0f","permalink":"/SeaORM/zh-CN/docs/internal-design/expanded-entity-format"}}');var t=s(74848),l=s(28453);const a={},r="\u4e0e Diesel \u5bf9\u6bd4",c={},d=[{value:"\u5f02\u6b65\u4f18\u5148",id:"\u5f02\u6b65\u4f18\u5148",level:2},{value:"\u4e8b\u52a1 API",id:"\u4e8b\u52a1-api",level:3},{value:"\u6570\u636e\u5e93\u540e\u7aef\u6cdb\u578b",id:"\u6570\u636e\u5e93\u540e\u7aef\u6cdb\u578b",level:2},{value:"\u57fa\u4e8e Entity \u7684\u5173\u7cfb\u6a21\u578b",id:"\u57fa\u4e8e-entity-\u7684\u5173\u7cfb\u6a21\u578b",level:2},{value:"\u53cd\u5c04",id:"\u53cd\u5c04",level:2},{value:"\u5185\u7f6e\u5de5\u5177",id:"\u5185\u7f6e\u5de5\u5177",level:2},{value:"\u53ef\u4ee5 Entity \u4f18\u5148",id:"\u53ef\u4ee5-entity-\u4f18\u5148",level:2},{value:"\u5d4c\u5957 select \u53ca\u5176\u4ed6\u4eba\u4f53\u5de5\u7a0b\u5b66",id:"\u5d4c\u5957-select-\u53ca\u5176\u4ed6\u4eba\u4f53\u5de5\u7a0b\u5b66",level:2},{value:"\u4eba\u4f53\u5de5\u7a0b\u5b66\u7684 raw SQL",id:"\u4eba\u4f53\u5de5\u7a0b\u5b66\u7684-raw-sql",level:3},{value:"\u7f16\u8bd1\u65f6\u610f\u8bc6",id:"\u7f16\u8bd1\u65f6\u610f\u8bc6",level:2},{value:"\u793e\u533a\u91c7\u7528",id:"\u793e\u533a\u91c7\u7528",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u4e0e-diesel-\u5bf9\u6bd4",children:"\u4e0e Diesel \u5bf9\u6bd4"})}),"\n",(0,t.jsx)(n.p,{children:"\u8fd9\u662f\u4e00\u4e2a\u4e0d\u53ef\u907f\u514d\u4e14\u5bcc\u6709\u4e89\u8bae\u7684\u8bdd\u9898\uff0cSeaORM \u4e0e Diesel \u4e4b\u95f4\u7684\u6280\u672f\u5dee\u5f02\u5df2\u88ab\u5e7f\u6cdb\u8ba8\u8bba\u3002\u56e0\u6b64\uff0c\u6211\u60f3\u6307\u51fa\u6211\u4eec\u523b\u610f\u505a\u51fa\u7684\u4e00\u4e9b\u4e0d\u540c\u8bbe\u8ba1\u9009\u62e9\uff0c\u65e8\u5728\u8ba9\u4f7f\u7528 SeaORM \u7684\u4f53\u9a8c\u66f4\u6109\u5feb\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"\u5f02\u6b65\u4f18\u5148",children:"\u5f02\u6b65\u4f18\u5148"}),"\n",(0,t.jsxs)(n.p,{children:["SeaORM \u4ece\u4e00\u5f00\u59cb\u5c31\u63d0\u4f9b\u4e00\u6d41\u7684\u5f02\u6b65\u652f\u6301\u3002\u4f60\u4e0d\u9700\u8981\u5f15\u5165\u8fde\u63a5\u6c60\u4f9d\u8d56\uff08\u5982 ",(0,t.jsx)(n.code,{children:"r2d2"}),"\uff09\u3002\u6211\u4eec\u4e3a\u6d41\u884c\u7684 Web \u6846\u67b6\u63d0\u4f9b\u4e86\u8bb8\u591a\u793a\u4f8b\uff0c\u5b83\u4eec\u662f\u6211\u4eec CI \u7684\u4e00\u90e8\u5206\uff0c\u56e0\u6b64\u6c38\u8fdc\u4e0d\u4f1a\u51fa\u95ee\u9898\u3002"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/actix_example",children:"Actix Example"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/axum_example",children:"Axum Example"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/graphql_example",children:"GraphQL Example"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/jsonrpsee_example",children:"jsonrpsee Example"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/loco_example",children:"Loco TODO Example"})," / ",(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/loco_starter",children:"Loco REST Starter"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/poem_example",children:"Poem Example"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/rocket_example",children:"Rocket Example"})," / ",(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/rocket_okapi_example",children:"Rocket OpenAPI Example"})]}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/salvo_example",children:"Salvo Example"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/tonic_example",children:"Tonic Example"})}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/sea-orm/tree/master/examples/seaography_example",children:"Seaography Example (Bakery)"})," / ",(0,t.jsx)(n.a,{href:"https://github.com/SeaQL/seaography/tree/main/examples/sqlite",children:"Seaography Example (Sakila)"})]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u6211\u4eec\u5f3a\u70c8\u63a8\u8350 ",(0,t.jsx)(n.a,{href:"https://loco.rs/",children:"Loco.rs"}),"\u3002\u5982\u679c\u4f60\u5728\u5bfb\u627e\u5f00\u7bb1\u5373\u7528\u7684\u6846\u67b6\uff0c\u5b83\u63d0\u4f9b\u4e86\u6700\u63a5\u8fd1 Rust \u7248\u300cRuby on Rails\u300d\u7684\u4f53\u9a8c\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\uff08Diesel \u63d0\u4f9b\u7684\u793a\u4f8b\u6709\u9650\uff0c\u5bf9 Web \u6846\u67b6\u7684\u4e00\u624b\u652f\u6301\u4e5f\u6709\u9650\uff09"}),"\n",(0,t.jsx)(n.h3,{id:"\u4e8b\u52a1-api",children:"\u4e8b\u52a1 API"}),"\n",(0,t.jsxs)(n.p,{children:["\u57fa\u4e8e\u95ed\u5305\u7684 API \u4e0e ",(0,t.jsx)(n.code,{children:"begin()"})," / ",(0,t.jsx)(n.code,{children:"commit()"})," \u63a5\u53e3\uff08\u5373 ",(0,t.jsx)(n.code,{children:"TransactionManager"}),"\uff09\u5404\u6709\u4f18\u52a3\u3002SeaORM \u4e24\u8005\u90fd\u652f\u6301\uff0c\u4f46 Diesel actively \u4e0d\u9f13\u52b1\u4f60\u4f7f\u7528 ",(0,t.jsx)(n.code,{children:"begin()"})," / ",(0,t.jsx)(n.code,{children:"commit()"})," API\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"\u56e0\u6b64\uff0c\u5f53\u4f60\u9700\u8981\u65f6\u53ef\u4ee5\u8fd9\u6837\u505a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let txn = db.begin().await?;\n\n{\n    let txn = txn.begin().await?;\n\n    {\n        let txn = txn.begin().await?;\n        // this will not be committed\n    }\n\n    // commit nested transaction\n    txn.commit().await?;\n}\n\ntxn.commit().await?;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u6570\u636e\u5e93\u540e\u7aef\u6cdb\u578b",children:"\u6570\u636e\u5e93\u540e\u7aef\u6cdb\u578b"}),"\n",(0,t.jsx)(n.p,{children:"SeaORM \u7684 Entity API \u662f\u540e\u7aef\u6cdb\u578b\u95e8\u9762\uff0c\u5728\u7f16\u8bd1\u65f6\u4e0d\u9700\u8981\u6570\u636e\u5e93\u540e\u7aef\u3002\uff08\u4e8b\u5b9e\u4e0a\uff0c\u7f16\u8bd1\u5b9e\u4f53\u65f6\u751a\u81f3\u4e0d\u9700\u8981\u5f02\u6b65\u6267\u884c\u73af\u5883\uff09\u3002\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u8bbe\u8ba1\u4e00\u4e2a\u590d\u6742\u7684\u5e94\u7528\uff0c\u5728\u751f\u4ea7\u73af\u5883\u4f7f\u7528 Postgres\uff0c\u4f46\u5927\u91cf\u6d4b\u8bd5\u9488\u5bf9 SQLite \u7f16\u5199\u3002"}),"\n",(0,t.jsxs)(n.p,{children:["\u4e8b\u5b9e\u4e0a\uff0c",(0,t.jsx)(n.a,{href:"https://zed.dev/",children:"Zed Editor"})," \u7684 ",(0,t.jsx)(n.a,{href:"https://github.com/zed-industries/zed/blob/main/crates/collab/README.md",children:"collab"})," API \u670d\u52a1\u5668\u5c31\u662f\u8fd9\u6837\u505a\u7684\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["SeaORM \u5728\u5408\u7406\u7684\u5730\u65b9\u5c1d\u8bd5\u63d0\u4f9b\u8de8\u6570\u636e\u5e93\u7279\u6027\u7684\u62bd\u8c61\u3002\u521d\u521b\u516c\u53f8\u53ef\u4ee5\u6784\u5efa\u6570\u636e\u5e93\u65e0\u5173\u7684\u4ea7\u54c1\u3002\u4e8b\u5b9e\u4e0a\uff0c",(0,t.jsx)(n.a,{href:"https://docs.risingwave.com/get-started/architecture",children:"RisingWave"})," \u5c31\u662f\u8fd9\u6837\u5b9e\u73b0\u5176\u6570\u636e\u5b58\u50a8\u4ee5\u652f\u6301 Postgres\u3001MySQL \u548c SQLite \u7684\u3002"]}),"\n",(0,t.jsxs)(n.p,{children:["Diesel \u6700\u8fd1\u63d0\u4f9b\u4e86\u4e00\u4e9b\u7f16\u5199\u591a\u6570\u636e\u5e93\u6cdb\u578b\u4ee3\u7801\u7684\u80fd\u529b\uff0c\u4f46\u4f60\u4ecd\u7136\u9700\u8981\u81ea\u5df1\u5904\u7406\u8de8\u6570\u636e\u5e93\u5dee\u5f02\u3002\u4f46\u4ece\u6839\u672c\u4e0a\u8bb2\uff0c\u5728 SeaORM \u4e2d\u4f60\u53ea\u9700\u7f16\u8bd1\u4e00\u6b21\uff1a\u4e1a\u52a1\u903b\u8f91\u662f\u4e00\u6b21\u7f16\u8bd1\u7684\uff08\u5373\u975e\u7279\u5f81\u57fa\u4e8e\uff09\uff0c\u5dee\u5f02\u7531\u540e\u7aef\u7684 ",(0,t.jsx)(n.code,{children:"match"})," \u8bed\u53e5\u5904\u7406\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0cDiesel \u7684\u4ee3\u7801\u5fc5\u987b\u4e3a\u6bcf\u4e2a\u540e\u7aef\u5355\u72ec\u5355\u6001\u5316\u3002"]}),"\n",(0,t.jsx)(n.h2,{id:"\u57fa\u4e8e-entity-\u7684\u5173\u7cfb\u6a21\u578b",children:"\u57fa\u4e8e Entity \u7684\u5173\u7cfb\u6a21\u578b"}),"\n",(0,t.jsx)(n.p,{children:"SeaORM \u7684\u5173\u7cfb\u5efa\u6a21\u5728\u66f4\u9ad8\u5c42\u6b21\uff1a\u6211\u4eec\u5c06 M-N \u5173\u7cfb\u89c6\u4e3a\u539f\u5b50\u5355\u5143\uff0c\u5728\u8bb8\u591a\u573a\u666f\u4e0b\u53ef\u4ee5\u8df3\u8fc7\u4e2d\u95f4\u8868\u8fde\u63a5\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u8003\u8651\u6211\u4eec\u7684 readme \u793a\u4f8b\uff0c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"// SeaORM\nlet cake_with_filling: Vec<(cake::Model, Option<fruit::Model>)> =\n    Cake::find().find_also_related(Filling).all(db).await?;\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5728 Diesel \u4e2d\u8981\u505a\u5230\u8fd9\u4e00\u70b9\uff0c\u9700\u8981\u4e24\u6b21 join\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"// Diesel\nlet cake_with_filling: Vec<(Cake, Filling)> =\n    cake::table\n        .inner_join(cake_filling::table.inner_join(filling::table))\n        .select((cake::all_columns, filling::all_columns))\n        .load::<(Cake, Filling)>(conn)?;\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u4ee5\u4e0b\u4ec5\u5728 SeaORM \u4e2d\u53ef\u80fd\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"// SeaORM\nlet cake_with_fillings: Vec<(cake::Model, Vec<filling::Model>)> = Cake::find()\n    .find_with_related(Filling) // two joins are performed\n    .all(db) // rows are consolidated by left entity\n    .await?;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u53cd\u5c04",children:"\u53cd\u5c04"}),"\n",(0,t.jsx)(n.p,{children:"SeaORM \u7684\u6a21\u578b\u548c ActiveModel \u5177\u6709\u4e00\u4e9b\u6709\u7528\u7684\u53cd\u5c04\u80fd\u529b\u3002\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u83b7\u53d6/\u8bbe\u7f6e\u5c5e\u6027\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'let mut fruit = fruit::Model { .. };\nfruit.set("name".parse().unwrap(), "orange".into());\nassert_eq!(fruit.name, "orange");\n'})}),"\n",(0,t.jsx)(n.p,{children:"\u4e8b\u5b9e\u4e0a\uff0c\u4f60\u53ef\u4ee5\u8f7b\u677e\u5904\u7406 JSON \u8f93\u5165\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'let fruit = fruit::ActiveModel::from_json(json!({\n    "name": "Apple",\n}))?;\n\nassert_eq!(\n    fruit,\n    fruit::ActiveModel {\n        id: ActiveValue::NotSet,\n        name: ActiveValue::Set("Apple".to_owned()),\n        cake_id: ActiveValue::NotSet,\n    }\n);\n'})}),"\n",(0,t.jsx)(n.p,{children:"\uff08\u5728 Diesel \u4e2d\u65e0\u6cd5\u8fdb\u884c\u4efb\u4f55\u53cd\u5c04\uff0c\u4e8b\u5b9e\u4e0a\uff0c\u4f60\u5fc5\u987b\u81ea\u5df1\u7f16\u5199\u7ed3\u6784\u4f53\u3002\uff09"}),"\n",(0,t.jsx)(n.h2,{id:"\u5185\u7f6e\u5de5\u5177",children:"\u5185\u7f6e\u5de5\u5177"}),"\n",(0,t.jsx)(n.p,{children:"\u4f8b\u5982\uff0cSeaORM \u5f00\u7bb1\u5373\u7528\u63d0\u4f9b\u57fa\u4e8e\u504f\u79fb\u548c\u57fa\u4e8e\u6e38\u6807\u7684\u5206\u9875\uff0c\u6240\u4ee5\u4f60\u4e0d\u9700\u8981\u81ea\u5df1\u7f16\u5199\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"let paginator = Post::find()\n    .order_by_asc(post::Column::Id)\n    .paginate(db, posts_per_page);\nlet num_pages = paginator.num_pages().await?;\nlet posts: Vec<post::Model> = paginator.fetch_page(current_page).await?;\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'let mut cursor = post::Entity::find().cursor_by(post::Column::Id);\n\n// Filter paginated result by "post"."id" > 1 AND "post"."id" < 100\ncursor.after(1).before(100);\n\n// Get first 10 rows (order by "post"."id" ASC)\nlet posts: Vec<post::Model> = cursor.first(10).all(db).await?\n'})}),"\n",(0,t.jsx)(n.p,{children:"\uff08Diesel \u4e0d\u63d0\u4f9b\u6b64\u7c7b\u5de5\u5177\u3002\uff09"}),"\n",(0,t.jsx)(n.h2,{id:"\u53ef\u4ee5-entity-\u4f18\u5148",children:"\u53ef\u4ee5 Entity \u4f18\u5148"}),"\n",(0,t.jsx)(n.p,{children:"Entity \u5305\u542b\u6570\u636e\u5e93\u67b6\u6784\u7684\u6240\u6709\u5fc5\u8981\u4fe1\u606f\uff0c\u6240\u4ee5\u4f60\u53ea\u9700\u67e5\u770b\u4e00\u4e2a\u5730\u65b9\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528\u5b83\u4eec\u6765\u8bbe\u7f6e\u6570\u636e\u5e93\u67b6\u6784\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'#[derive(Clone, Debug, PartialEq, Eq, DeriveEntityModel)]\n#[sea_orm(table_name = "lineitem")]\npub struct Model {\n    #[sea_orm(primary_key)]\n    pub id: i32,\n    #[sea_orm(unique_key = "item")]\n    pub order_id: i32,\n    #[sea_orm(unique_key = "item")]\n    pub cake_id: i32,\n}\n\nlet stmts = Schema::new(backend).create_index_from_entity(lineitem::Entity);\n\nassert_eq!(\n    backend.build(stmts[0]),\n    r#"CREATE UNIQUE INDEX "idx-lineitem-item" ON "lineitem" ("order_id", "cake_id")"#\n);\n'})}),"\n",(0,t.jsx)(n.p,{children:"\uff08\u5728 Diesel \u4e2d\u65e0\u6cd5\u4ece schema \u63cf\u8ff0\u53cd\u63a8\u56de DDL\uff09"}),"\n",(0,t.jsx)(n.h2,{id:"\u5d4c\u5957-select-\u53ca\u5176\u4ed6\u4eba\u4f53\u5de5\u7a0b\u5b66",children:"\u5d4c\u5957 select \u53ca\u5176\u4ed6\u4eba\u4f53\u5de5\u7a0b\u5b66"}),"\n",(0,t.jsx)(n.p,{children:"SeaORM 2.0 \u5f15\u5165\u4e86\u8bb8\u591a Diesel \u4e2d\u4e0d\u53ef\u80fd\u5b9e\u73b0\u7684\u65b0\u7279\u6027\u3002"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'use sea_orm::DerivePartialModel;\n\n#[derive(DerivePartialModel)]\n#[sea_orm(entity = "cake::Entity")]\nstruct CakeWithFruit {\n    id: i32,\n    name: String,\n    #[sea_orm(nested)]\n    fruit: Option<fruit::Model>,\n}\n\nlet cakes: Vec<CakeWithFruit> = Cake::find()\n    .left_join(fruit::Entity) // no need to specify join condition\n    .into_partial_model() // only the columns in the partial model will be selected\n    .all(db)\n    .await?;\n'})}),"\n",(0,t.jsx)(n.p,{children:"SeaORM\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"#[derive(DerivePartialModel)]"})," \u81ea\u52a8\u751f\u6210\u6295\u5f71"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"into_partial_model()"})," \u4ec5\u9009\u62e9\u9700\u8981\u7684\u5217"]}),"\n",(0,t.jsx)(n.li,{children:"\u8fde\u63a5\u53ef\u4ee5\u4ece entity \u5173\u7cfb\u63a8\u65ad"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Diesel\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f60\u5fc5\u987b\u663e\u5f0f\u9009\u62e9\u5217"}),"\n",(0,t.jsx)(n.li,{children:"\u4f60\u5fc5\u987b\u663e\u5f0f\u5c06\u5143\u7ec4\u6620\u5c04\u5230\u4f60\u7684\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(n.li,{children:"\u6ca1\u6709\u5185\u7f6e\u7684\u300c\u5c40\u90e8\u6a21\u578b\u300dderive"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"\u4eba\u4f53\u5de5\u7a0b\u5b66\u7684-raw-sql",children:"\u4eba\u4f53\u5de5\u7a0b\u5b66\u7684 raw SQL"}),"\n",(0,t.jsx)(n.p,{children:"\u5f53\u67e5\u8be2\u590d\u6742\u5230\u9700\u8981\u624b\u5199 SQL \u65f6\uff0c\u5e26\u53c2\u6570\u5c55\u5f00\u7684 raw SQL \u662f\u6551\u661f\uff01"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:'let item = Item { id: 2 }; // nested parameter access\n\nlet cake_ids = [2, 3, 4]; // expanded by the `..` operator\n\n// can use nested select with raw SQL\nlet cake: Option<CakeWithBakery> = CakeWithBakery::find_by_statement(raw_sql!(\n    Sqlite,\n    r#"SELECT "cake"."name", "bakery"."name" AS "bakery_name"\n       FROM "cake"\n       LEFT JOIN "bakery" ON "cake"."bakery_id" = "bakery"."id"\n       WHERE "cake"."id" = {item.id} OR "cake"."id" IN ({..cake_ids})"#\n))\n.one(db)\n.await?;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u7f16\u8bd1\u65f6\u610f\u8bc6",children:"\u7f16\u8bd1\u65f6\u610f\u8bc6"}),"\n",(0,t.jsx)(n.p,{children:"\u4e3a\u4ec0\u4e48 Diesel \u4e2d\u590d\u6742\u7684 schema \u7f16\u8bd1\u5982\u6b64\u7f13\u6162\uff1f\u4ee5\u4e0b\u662f\u9ad8\u5c42\u89e3\u91ca\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Diesel \u7684 ",(0,t.jsx)(n.code,{children:"table!"})," \u5b8f\u751f\u6210\u5927\u91cf\u4ee3\u7801\uff1a\u6bcf\u8868\u4e00\u4e2a\u6a21\u5757\u3001\u6bcf\u5217\u4e00\u4e2a\u7ed3\u6784\u4f53\u3001\u7528\u4e8e join \u7684\u7279\u5f81\u7b49\u3002\u8fd9\u63d0\u4f9b\u4e86\u7c7b\u578b\u5b89\u5168\u7684\u67e5\u8be2\u6784\u5efa\u5668\uff0c\u4f46\u4e5f\u610f\u5473\u7740\u5728\u5e95\u5c42\u751f\u6210\u4e86\u6570\u5343\u79cd\u4e0d\u540c\u7684\u7c7b\u578b"]}),"\n",(0,t.jsx)(n.li,{children:"Diesel \u5c06 SQL \u67e5\u8be2\u7f16\u7801\u5230 Rust \u7c7b\u578b\u4e2d\u3002\u8fd9\u610f\u5473\u7740\u4f60\u5199\u7684\u6bcf\u4e2a\u67e5\u8be2\u90fd\u4f1a\u4ea7\u751f\u4e00\u4e2a\u552f\u4e00\u7684\u3001\u6df1\u5c42\u5d4c\u5957\u7684\u7c7b\u578b\u3002\u7c7b\u578b\u63a8\u65ad\u548c\u7279\u5f81\u89e3\u6790\u4f1a\u53d8\u5f97\u975e\u5e38\u91cd"}),"\n",(0,t.jsx)(n.li,{children:"\u6240\u6709\u4e1c\u897f\u90fd\u5fc5\u987b\u5728\u4e00\u4e2a\u5927 crate \u4e2d\uff0c\u6240\u4ee5 rustc \u65e0\u6cd5\u6709\u6548\u5e76\u884c\u7f16\u8bd1"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u6700\u7cdf\u7cd5\u7684\u662f\uff1a",(0,t.jsxs)(n.a,{href:"https://github.com/diesel-rs/diesel/issues/4333",children:[(0,t.jsx)(n.code,{children:"allow_tables_to_appear_in_same_query"})," \u5177\u6709 O(N^2) \u590d\u6742\u5ea6"]})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"allow_tables_to_appear_in_same_query!(users, posts, comments);\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u5c55\u5f00\u4e3a\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-rust",children:"allow_tables_to_appear_in_same_query!(users, posts);\nallow_tables_to_appear_in_same_query!(users, comments);\nallow_tables_to_appear_in_same_query!(posts, comments);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u5982\u679c\u4f60\u6709 100 \u4e2a\u5b9e\u4f53\uff0c\u5b83\u4f1a\u5c55\u5f00\u4e3a ",(0,t.jsx)(n.code,{children:"100 C 2 = 4950"}),"\uff0c\u5373\u4e8c\u9879\u5f0f\u5c55\u5f00\u3002"]}),"\n",(0,t.jsx)(n.p,{children:"SeaORM \u8bbe\u8ba1\u4e3a\u968f\u590d\u6742\u5ea6\u826f\u597d\u6269\u5c55\uff0c\u5e76\u5bf9\u589e\u91cf\u7f16\u8bd1\u53cb\u597d\u3002"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"SeaQuery\uff0c\u5e95\u5c42\u67e5\u8be2\u6784\u5efa\u5668\uff0c\u662f\u4e00\u4e2a\u72ec\u7acb\u7684 crate\u3002\u867d\u7136\u8fd9\u662f\u5fc5\u9700\u4f9d\u8d56\uff0c\u4f46\u5b83\u975e\u5e38\u8f7b\u91cf\uff0c\u4e0d\u91cd\u5ea6\u6cdb\u578b\uff0c\u7f16\u8bd1\u5feb\u901f"}),"\n",(0,t.jsxs)(n.li,{children:["SeaORM \u4e3a\u6bcf\u4e2a entity \u751f\u6210\u56fa\u5b9a\u6570\u91cf\u7684\u7ed3\u6784\u4f53\uff1a",(0,t.jsx)(n.code,{children:"Entity"}),"\u3001",(0,t.jsx)(n.code,{children:"Model"}),"\u3001",(0,t.jsx)(n.code,{children:"ActiveModel"}),"\u3001",(0,t.jsx)(n.code,{children:"Column"})," \u548c ",(0,t.jsx)(n.code,{children:"PrimaryKey"}),"\u3002\u65e0\u8bba\u5217\u6570\u591a\u5c11\uff0c",(0,t.jsx)(n.code,{children:"Column"})," \u90fd\u662f\u5355\u4e2a\u679a\u4e3e"]}),"\n",(0,t.jsx)(n.li,{children:"SeaORM \u968f schema \u590d\u6742\u5ea6\u7ebf\u6027\u6269\u5c55\uff1a\u4e0e\u5b9e\u4f53\u6570\u91cf\u53ca\u5176\u5173\u7cfb\u6210\u6b63\u6bd4"}),"\n",(0,t.jsx)(n.li,{children:"\u5982\u4e0a\u6240\u8ff0\uff0cSeaORM \u7684 Entity \u53ef\u4ee5\u5728\u7eaf crate \u4e2d\u7f16\u8bd1\u3002\u5982\u679c\u4f60\u6709\u975e\u5e38\u590d\u6742\u7684 schema\uff0c\u53ef\u4ee5\u7b80\u5355\u5730\u5c06\u5b83\u4eec\u62c6\u5206\u6210\u591a\u4e2a crate"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u793e\u533a\u91c7\u7528",children:"\u793e\u533a\u91c7\u7528"}),"\n",(0,t.jsx)(n.p,{children:"SeaORM \u56e2\u961f\u75f4\u8ff7\u4e8e\u6539\u8fdb\u6587\u6863\u3001\u793a\u4f8b\u548c\u751f\u6001\u7cfb\u7edf\u96c6\u6210\u3002"}),"\n",(0,t.jsx)(n.p,{children:"\u6211\u4eec\u5f88\u9ad8\u5174\u770b\u5230\u516c\u53f8\u548c\u521d\u521b\u516c\u53f8\u4f7f\u7528 SeaORM \u6784\u5efa\u7684\u771f\u5b9e\u5e94\u7528\u3002\u4ee5\u4e0b\u6309\u5b57\u6bcd\u987a\u5e8f\u6392\u5217\uff1a"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)("a",{href:"https://caido.io/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/caido-logo.png"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://lap.dev/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/lapdev-logo.png"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://mydatamyconsent.com/",children:(0,t.jsx)("img",{style:{width:250},src:"https://www.sea-ql.org/SeaORM/img/other/mydatamyconsent-logo.png"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://openobserve.ai/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/openobserve-logo.svg"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://prefix.dev/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/prefixdev-logo.png"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://qdx.co/",children:(0,t.jsx)("img",{style:{width:80},src:"https://www.sea-ql.org/static/sponsors/QDX.svg"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://risingwave.com/",children:(0,t.jsx)("img",{style:{width:220},src:"https://www.sea-ql.org/SeaORM/img/other/risingwave-logo.svg"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://www.svix.com/",children:(0,t.jsx)("img",{style:{width:180},src:"https://www.sea-ql.org/SeaORM/img/other/svix-logo.svg"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://www.systeminit.com/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/systeminit-logo.png"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://upvpn.app/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/upvpn-logo.png"})}),"\xa0\xa0\xa0\xa0\n",(0,t.jsx)("a",{href:"https://zed.dev/",children:(0,t.jsx)("img",{style:{width:200},src:"https://www.sea-ql.org/SeaORM/img/other/zed-logo.png"})}),"\xa0\xa0\xa0\xa0"]}),"\n",(0,t.jsxs)(n.p,{children:["\u4e8b\u5b9e\u4e0a\uff0cSeaORM \u5728 ",(0,t.jsx)(n.a,{href:"https://crates.io/crates/sea-orm",children:"crates.io"})," \u4e0a\u6709 25 \u4e07\u5468\u4e0b\u8f7d\u91cf\uff0c\u5176\u4e2d\u5927\u90e8\u5206\u53d1\u751f\u5728\u5de5\u4f5c\u65e5\uff0c\u8868\u660e SeaORM \u5728\u4e13\u4e1a\u573a\u666f\u4e2d\u88ab\u5927\u91cf\u4f7f\u7528\u3002\u8fd9\u4e00\u6307\u6807\u6697\u793a SeaORM \u7684\u7528\u6237\u6d3b\u8dc3\u5ea6\u53ef\u80fd\u9ad8\u4e8e Diesel\uff08\u8bf7\u5bf9\u6b64\u8bf4\u6cd5\u6301\u4fdd\u7559\u6001\u5ea6\uff09\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);