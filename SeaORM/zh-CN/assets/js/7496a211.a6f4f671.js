"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[84612],{28453:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>o});var a=t(96540);const r={},i=a.createContext(r);function s(n){const e=a.useContext(i);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),a.createElement(i.Provider,{value:e},n.children)}},87670:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>m,frontMatter:()=>s,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"migration/seeding-data","title":"\u586b\u5145\u6570\u636e","description":"\u4f60\u53ef\u4ee5\u4ece SchemaManager \u83b7\u53d6 DbConn\uff0c\u5e76\u6309\u9700\u6267\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u4f8b\u5982\u586b\u5145\u6570\u636e\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/03-migration/04-seeding-data.md","sourceDirName":"03-migration","slug":"/migration/seeding-data","permalink":"/SeaORM/zh-CN/docs/migration/seeding-data","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/docs/03-migration/04-seeding-data.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1772389428000,"sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u8fd0\u884c\u8fc1\u79fb","permalink":"/SeaORM/zh-CN/docs/migration/running-migration"},"next":{"title":"\u4f7f\u7528 sea-orm-cli","permalink":"/SeaORM/zh-CN/docs/generate-entity/sea-orm-cli"}}');var r=t(74848),i=t(28453);const s={},o="\u586b\u5145\u6570\u636e",c={},d=[{value:"\u5728\u4e8b\u52a1\u4e2d\u586b\u5145\u6570\u636e",id:"\u5728\u4e8b\u52a1\u4e2d\u586b\u5145\u6570\u636e",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u586b\u5145\u6570\u636e",children:"\u586b\u5145\u6570\u636e"})}),"\n",(0,r.jsxs)(e.p,{children:["\u4f60\u53ef\u4ee5\u4ece ",(0,r.jsx)(e.code,{children:"SchemaManager"})," \u83b7\u53d6 ",(0,r.jsx)(e.code,{children:"DbConn"}),"\uff0c\u5e76\u6309\u9700\u6267\u884c\u6570\u636e\u64cd\u4f5c\uff0c\u4f8b\u5982\u586b\u5145\u6570\u636e\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use sea_orm_migration::sea_orm::{entity::*, query::*};\n\n// ...\n\n#[async_trait]\nimpl MigrationTrait for Migration {\n    async fn up(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        let db = manager.get_connection();\n\n        cake::ActiveModel {\n            name: Set("Cheesecake".to_owned()),\n            ..Default::default()\n        }\n        .insert(db)\n        .await?;\n\n        Ok(())\n    }\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u4f60\u4e5f\u53ef\u4ee5\u6267\u884c\u4efb\u610f SeaQuery \u8bed\u53e5\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use sea_orm_migration::sea_orm::{entity::*, query::*};\n\n// ...\n\n#[async_trait]\nimpl MigrationTrait for Migration {\n    async fn up(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        let stmt = Query::insert()\n            .into_table("cake")\n            .columns(["name"])\n            .values_panic(["Tiramisu".into()])\n            .to_owned();\n\n        manager.execute(&stmt).await?;\n\n        Ok(())\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5728\u4e8b\u52a1\u4e2d\u586b\u5145\u6570\u636e",children:"\u5728\u4e8b\u52a1\u4e2d\u586b\u5145\u6570\u636e"}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u8fc1\u79fb\u7684 up \u548c down \u4e2d\u5f00\u542f\u4e8b\u52a1\u5e76\u6267\u884c SQL\u3002"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use sea_orm_migration::sea_orm::{entity::*, query::*};\n\n// ...\n\n#[async_trait]\nimpl MigrationTrait for Migration {\n    async fn up(&self, manager: &SchemaManager) -> Result<(), DbErr> {\n        // Get the connection and start a transaction\n        let db = manager.get_connection();\n        let txn = db.begin().await?;\n\n        cake::ActiveModel {\n            name: Set("Cheesecake".to_owned()),\n            ..Default::default()\n        }\n        .insert(&txn)\n        .await?;\n\n        // Commit it\n        txn.commit().await?;\n\n        Ok(())\n    }\n}\n'})})]})}function m(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}}}]);