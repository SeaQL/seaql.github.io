"use strict";(self.webpackChunksea_orm=self.webpackChunksea_orm||[]).push([[43593],{28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var d=t(96540);const i={},r=d.createContext(i);function s(e){const n=d.useContext(r);return d.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),d.createElement(r.Provider,{value:n},e.children)}},50674:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>s,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"basic-crud/delete","title":"\u5220\u9664","description":"\u5220\u9664\u5355\u6761","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/05-basic-crud/07-delete.md","sourceDirName":"05-basic-crud","slug":"/basic-crud/delete","permalink":"/SeaORM/zh-CN/docs/basic-crud/delete","draft":false,"unlisted":false,"editUrl":"https://github.com/SeaQL/seaql.github.io/edit/master/SeaORM/docs/05-basic-crud/07-delete.md","tags":[],"version":"current","lastUpdatedBy":"Chris Tsang","lastUpdatedAt":1772368507000,"sidebarPosition":7,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u4fdd\u5b58","permalink":"/SeaORM/zh-CN/docs/basic-crud/save"},"next":{"title":"JSON","permalink":"/SeaORM/zh-CN/docs/basic-crud/json"}}');var i=t(74848),r=t(28453);const s={},l="\u5220\u9664",c={},a=[{value:"\u5220\u9664\u5355\u6761",id:"\u5220\u9664\u5355\u6761",level:2},{value:"\u6309\u4e3b\u952e\u5220\u9664",id:"\u6309\u4e3b\u952e\u5220\u9664",level:2},{value:"\u6309\u552f\u4e00\u952e\u5220\u9664",id:"\u6309\u552f\u4e00\u952e\u5220\u9664",level:2},{value:"\u6279\u91cf\u5220\u9664",id:"\u6279\u91cf\u5220\u9664",level:2},{value:"\u8fd4\u56de\u5220\u9664\u7684\u6a21\u578b",id:"\u8fd4\u56de\u5220\u9664\u7684\u6a21\u578b",level:2}];function o(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u5220\u9664",children:"\u5220\u9664"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5220\u9664\u5355\u6761",children:"\u5220\u9664\u5355\u6761"}),"\n",(0,i.jsx)(n.p,{children:"\u4ece\u6570\u636e\u5e93\u67e5\u627e\u4e00\u4e2a\u6a21\u578b\uff0c\u7136\u540e\u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u5bf9\u5e94\u7684\u884c\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"use sea_orm::entity::ModelTrait;\n\nlet orange: Option<fruit::Model> = Fruit::find_by_id(30).one(db).await?;\nlet orange: fruit::Model = orange.unwrap();\n\nlet res: DeleteResult = orange.delete(db).await?;\nassert_eq!(res.rows_affected, 1);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u6309\u4e3b\u952e\u5220\u9664",children:"\u6309\u4e3b\u952e\u5220\u9664"}),"\n",(0,i.jsx)(n.p,{children:"\u76f4\u63a5\u901a\u8fc7\u4e3b\u952e\u5220\u9664\u884c\uff0c\u65e0\u9700\u5148\u9009\u62e9\u6a21\u578b\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"let res: DeleteResult = Fruit::delete_by_id(38).exec(db).await?;\nassert_eq!(res.rows_affected, 1);\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Since ",(0,i.jsx)(n.code,{children:"2.0.0"})]}),(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"delete_by_id"})," \u73b0\u5728\u8fd4\u56de ",(0,i.jsx)(n.code,{children:"ValidatedDeleteOne"})," \u800c\u975e ",(0,i.jsx)(n.code,{children:"DeleteMany"}),"\u3002\u666e\u901a\u7684 ",(0,i.jsx)(n.code,{children:"exec"})," \u7528\u6cd5\u4e0d\u53d8\uff0c\u4f46 ",(0,i.jsx)(n.code,{children:"exec_with_returning"})," \u73b0\u5728\u8fd4\u56de ",(0,i.jsx)(n.code,{children:"Option<Model>"})," \u800c\u975e ",(0,i.jsx)(n.code,{children:"Vec<Model>"}),"\u3002"]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u6309\u552f\u4e00\u952e\u5220\u9664",children:"\u6309\u552f\u4e00\u952e\u5220\u9664"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.mdxAdmonitionTitle,{children:["Since ",(0,i.jsx)(n.code,{children:"2.0.0"})]})}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679c Entity \u5177\u6709 ",(0,i.jsx)(n.code,{children:"#[sea_orm(unique)]"})," \u5c5e\u6027\uff0c\u4f1a\u751f\u6210 ",(0,i.jsx)(n.code,{children:"delete_by_*"})," \u4fbf\u6377\u65b9\u6cd5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'user::Entity::delete_by_email("bob@spam.com").exec(db).await?;\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u4e0e ",(0,i.jsx)(n.code,{children:"delete_by_id"})," \u4e00\u6837\uff0c\u8fd9\u8fd4\u56de ",(0,i.jsx)(n.code,{children:"ValidatedDeleteOne"}),"\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u6279\u91cf\u5220\u9664",children:"\u6279\u91cf\u5220\u9664"}),"\n",(0,i.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u5728\u4e0d\u67e5\u627e\u6bcf\u4e2a\u6a21\u578b\u7684\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 SeaORM select \u4ece\u6570\u636e\u5e93\u4e2d\u5220\u9664\u591a\u884c\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"// DELETE FROM `fruit` WHERE `fruit`.`name` LIKE '%Orange%'\nlet res: DeleteResult = fruit::Entity::delete_many()\n    .filter(fruit::Column::Name.contains(\"Orange\"))\n    .exec(db)\n    .await?;\n\nassert_eq!(res.rows_affected, 2);\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u8fd4\u56de\u5220\u9664\u7684\u6a21\u578b",children:"\u8fd4\u56de\u5220\u9664\u7684\u6a21\u578b"}),"\n",(0,i.jsxs)(n.p,{children:["\u4ec5 Postgres \u548c SQLite \u652f\u6301\uff0cMariaDB \u9700\u8981 ",(0,i.jsx)(n.code,{children:"mariadb-use-returning"})," feature \u6807\u5fd7\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:'assert_eq!(\n    fruit::Entity::delete(ActiveModel {\n        id: Set(3),\n        ..Default::default()\n    })\n    .exec_with_returning(db)\n    .await?,\n    Some(fruit::Model {\n        id: 3,\n        name: "Apple".to_owned(),\n    })\n);\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-rust",children:"let deleted_models: Vec<order::Model> = order::Entity::delete_many()\n    .filter(order::Column::CustomerId.eq(22))\n    .exec_with_returning(db)\n    .await?\n\nassert_eq!(deleted_models.len(), 2); // two items deleted\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);