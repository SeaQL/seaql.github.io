---
slug: 2025-08-20-sea-query-1.0
title: The road to SeaQuery 1.0
author: SeaQL Team
author_title: Chris Tsang
author_url: https://github.com/SeaQL
author_image_url: https://www.sea-ql.org/blog/img/SeaQL.png
image: https://www.sea-ql.org/blog/img/SeaQuery%201.0%20Banner.png
tags: [news]
---

<img alt="SeaQuery 1.0 Banner" src="/blog/img/SeaQuery%201.0%20Banner.png"/>

SeaQuery 0.1.0 was first released on 2020-12-16 - it's been a few years! Since then, there have been 32 releases, each introducing a set of new features. As with many software projects, the organic evolution driven by a diverse community of open source contributors has led to occasional inconsistencies across the codebase. It's a good problem to have, and a testament to our vibrant community. But now, it's time to stabilize SeaQuery and address some of these issues.

## Architectural changes

There are a few architectural changes that can only be made by breaking the API, so let's go through them one by one:

### Forbid unsafe code

[#930](https://github.com/SeaQL/sea-query/pull/930)
#![forbid(unsafe_code)] has been added to all workspace crates, ensuring that SeaQuery no longer contains any unsafe code. While only one instance of unsafe was previously used, and has now been removed, this change reinforces our commitment to maintaining code quality.

### Unify `Expr` and `SimpleExpr` as one type

[#890](https://github.com/SeaQL/sea-query/pull/890)
Previously, a lot of operator methods (e.g. `eq`) are duplicated across `Expr` and `SimpleExpr`, but the list of methods is slightly different for each. The type conversions between the two are also sometimes non-obvious. It complicates the type system and made writing generic code difficult.

In 1.0, `SimpleExpr` is "merged into" `Expr`. Actually `SimpleExpr` is now just a type alias `type SimpleExpr = Expr;`. So a lot of redundant `.into()` can now be removed. In addition, now all methods are defined by `ExprTrait`, and the inherent methods were removed. If you encounter the following error, please add `use sea_query::ExprTrait` in scope.
```rust
error[E0599]: no method named `like` found for enum `sea_query::Expr` in the current scope
    |
    |         Expr::col((self.entity_name(), *self)).like(s)
    |
    |     fn like<L>(self, like: L) -> Expr
    |        ---- the method is available for `sea_query::Expr` here
    |
    = help: items from traits can only be used if the trait is in scope
help: trait `ExprTrait` which provides `like` is implemented but not in scope; perhaps you want to import it
    |
 -> + use sea_query::ExprTrait;
```
```rust
error[E0308]: mismatched types
  --> src/sqlite/discovery.rs:27:57
   |
   |             .and_where(Expr::col(Alias::new("type")).eq("table"))
   |                                                      -- ^^^^^^^ expected `&Expr`, found `&str`
   |                                                      |
   |                                                      arguments to this method are incorrect
   |
   = note: expected reference `&sea_query::Expr`
              found reference `&'static str`
```

### Revamp `Iden` type system.

[#909](https://github.com/SeaQL/sea-query/pull/909)
Previously, `DynIden` is lazily rendered, i.e. the identifier is only constructed while serializing the AST. Now, it's an eagerly rendered string `Cow<'static, str>`, constructed while constructing the AST.

```rust
pub type DynIden = SeaRc<dyn Iden>;               // old
pub struct DynIden(pub(crate) Cow<'static, str>); // new

pub struct SeaRc<I>(pub(crate) RcOrArc<I>);       // old
pub struct SeaRc;                                 // new
```

The method signature of `Iden::unquoted` is changed. If you're implementing `Iden` manually, you can modify it like below https://github.com/SeaQL/sea-query/pull/909
```rust
error[E0050]: method `unquoted` has 2 parameters but the declaration in trait `types::Iden::unquoted` has 1
  --> src/tests_cfg.rs:31:17
   |
   |     fn unquoted(&self, s: &mut dyn std::fmt::Write) {
   |                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ expected 1 parameter, found 2
   |
  ::: src/types.rs:63:17
   |
   |     fn unquoted(&self) -> &str;
   |                 ----- trait requires 1 parameter
```
```rust
impl Iden for Glyph {
  - fn unquoted(&self, s: &mut dyn fmt::Write) {
  + fn unquoted(&self) -> &str {
  -     write!(
  -         s,
  -         "{}",
            match self {
                Self::Table => "glyph",
                Self::Id => "id",
                Self::Tokens => "tokens",
            }
  -     )
  -     .unwrap();
    }
}
```

The implications of this new design are:

1. Type info is erased from `Iden` early
2. `SeaRc` is no longer an alias to `Rc` / `Arc`. As such, `Send` / `Sync` is removed from the trait `Iden`

### `Alias::new` is no longer needed

[#882](https://github.com/SeaQL/sea-query/pull/882)
SeaQuery encourages you to define all column / table identifiers in one place and use them throughout the project. But there are places where an alias is needed once off. Now `&'static str` is an `Iden`, so it can be used in all places where `Alias` are needed. The `Alias` type remains for backwards compatibility, so existing code should still compile. This can reduce the verbosity of code, for example:

```rust
let query = Query::select()
    .from(Character::Table)
 -  .expr_as(Func::count(Expr::col(Character::Id)), Alias::new("count"))
 +  .expr_as(Func::count(Expr::col(Character::Id)), "count")
    .to_owned();
```

### Unbox `Value` variants

[#925](https://github.com/SeaQL/sea-query/pull/925)
Most `Value` variants are now unboxed (except `BigDecimal` and `Array`). Previously the size is 24 bytes, now it's 32.
```rust
assert_eq!(std::mem::size_of::<Value>(), 32);
```

If you were constructing / pattern matching `Value` variants manually, `Box::new` can now be removed and pattern matching is simpler.

### `non_exhaustive` AST enums

[#891](https://github.com/SeaQL/sea-query/pull/891)
`#[non_exhaustive]` are added to all AST enums. It allows us to add new features and extend the AST without breaking the API. If you encounter the following error,
please add a wildcard match `_ => {..}` https://github.com/SeaQL/sea-query/pull/891
```rust
error[E0004]: non-exhaustive patterns: `&_` not covered
    |
    |     match table_ref {
    |           ^^^^^^^^^ pattern `&_` not covered
    |
note: `TableRef` defined here
    |
    | pub enum TableRef {
    | ^^^^^^^^^^^^^^^^^
    = note: the matched value is of type `&TableRef`
    = note: `TableRef` is marked as non-exhaustive, so a wildcard `_` is necessary to match exhaustively
help: ensure that all possible cases are being handled by adding a match arm with a wildcard pattern or an explicit pattern as shown
    |
    | TableRef::FunctionCall(_, tbl) => SeaRc::clone(tbl),
 -> | &_ => todo!(),
```

### Reworked `TableRef` and `ColumnRef`

[#927](https://github.com/SeaQL/sea-query/pull/927)
Previously, the `TableRef` variants are a product of all valid combinations of `Option<Database>`, `Option<Schema>`, `Table` and `Option<Alias>`. It is excessive and makes pattern matching difficult.

Now they're collapsed into one. `SchemaTable` is now simply a type alias of `TableName`. It makes constructing and pattern-matching `TableRef` much easier.

```rust
// the following variants are collapsed into one:
enum TableRef {
    Table(DynIden),
    SchemaTable(DynIden, DynIden),
    DatabaseSchemaTable(DynIden, DynIden, DynIden),
    TableAlias(DynIden, DynIden),
    SchemaTableAlias(DynIden, DynIden, DynIden),
    DatabaseSchemaTableAlias(DynIden, DynIden, DynIden, DynIden),
    ..
}
// now it's just:
enum TableRef {
    Table(TableName, Option<DynIden>), // optional Alias
    ..
}
// because it's restructured to:
pub struct DatabaseName(pub DynIden);
pub struct SchemaName(pub Option<DatabaseName>, pub DynIden);
pub struct TableName(pub Option<SchemaName>, pub DynIden);
// so TableName can represent [database.][schema.]table
```
* Reworked `TableRef` and `ColumnRef` variants. `SchemaTable` is now a type alias of `TableName` https://github.com/SeaQL/sea-query/pull/927
```rust
// the following variants are collapsed into one:
enum TableRef {
    Table(DynIden),
    SchemaTable(DynIden, DynIden),
    DatabaseSchemaTable(DynIden, DynIden, DynIden),
    TableAlias(DynIden, DynIden),
    SchemaTableAlias(DynIden, DynIden, DynIden),
    DatabaseSchemaTableAlias(DynIden, DynIden, DynIden, DynIden),
    ..
}
// now it's just:
enum TableRef {
    Table(TableName, Option<DynIden>), // optional Alias
    ..
}
// because it's restructured to:
pub struct DatabaseName(pub DynIden);
pub struct SchemaName(pub Option<DatabaseName>, pub DynIden);
pub struct TableName(pub Option<SchemaName>, pub DynIden);
// so TableName can represent [database.][schema.]table
```

## Release Plan

This is just one of many new features we've added while preparing [SeaQuery 1.0](https://github.com/SeaQL/sea-query/blob/master/CHANGELOG.md#100---pending). This is currently an `rc` release, if you have ideas please [join the discussion](https://github.com/SeaQL/sea-query/discussions/795).

## Sponsor

If you feel generous, a small donation will be greatly appreciated, and goes a long way towards sustaining the organization.

A big shout out to our [GitHub sponsors](https://github.com/sponsors/SeaQL) ðŸ˜‡:

<img src="/blog/img/github-sponsors-20250812.jpg#light" />
<img src="/blog/img/github-sponsors-20250812-dark.jpg#dark" />

#### Gold Sponsor

<a href="https://qdx.co/">
    <img src="https://www.sea-ql.org/static/sponsors/QDX.svg" width="128" />
</a>

[QDX](https://qdx.co/) pioneers quantum dynamicsâ€“powered drug discovery, leveraging AI and supercomputing to accelerate molecular modeling.
We're grateful to QDX for sponsoring the development of SeaORM, the SQL toolkit that powers their data engineering workflows.

## Rustacean Sticker Pack ðŸ¦€

The Rustacean Sticker Pack is the perfect way to express your passion for Rust.
Our stickers are made with a premium water-resistant vinyl with a unique matte finish.
Stick them on your laptop, notebook, or any gadget to show off your love for Rust!

Moreover, all proceeds contributes directly to the ongoing development of SeaQL projects.

Sticker Pack Contents:
- Logo of SeaQL projects: SeaQL, SeaORM, SeaQuery, Seaography, FireDBG
- Mascot of SeaQL: Terres the Hermit Crab
- Mascot of Rust: Ferris the Crab
- The Rustacean word

[Support SeaQL and get a Sticker Pack!](https://www.sea-ql.org/sticker-pack/)

<a href="https://www.sea-ql.org/sticker-pack/"><img style={{borderRadius: "25px"}} alt="Rustacean Sticker Pack by SeaQL" src="https://www.sea-ql.org/static/sticker-pack-1s.jpg" /></a>
